"use strict";(self["webpackChunkSolid"]=self["webpackChunkSolid"]||[]).push([[5469],{1144:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"widgetContainer cardManagement"},[a("div",{staticClass:"navigationHeader"},[a("div",{staticClass:"navigationHeader__inner"},[a("p",{staticClass:"title"},[t._v(" "+t._s(t.$t("details_title"))+" ")]),a("span",{staticClass:"el-icon-close",on:{click:t.drawerClose}})])]),a("div",{staticClass:"widgetContainer__body"},[a("div",{staticClass:"cardInfo"},[a("div",{staticClass:"cardInfo__card"},[a("div",{staticClass:"card-front"},[a("Card",{key:t.getSelectedCard.id,attrs:{card:t.getSelectedCard,"show-logo":!1,"show-secret-data":!0,"show-activation-switch":!0},on:{update:function(e){return t.onUpdate(e)},cardNumberDisplay:t.cardNumberDisplay}})],1)])]),a("div",{staticClass:"listWithActions card-number-copy"},[a("ul",{staticClass:"main-actions border-1"},[a("li",{staticClass:"action-box card-number"},[a("div",{staticClass:"details"},[a("p",{staticClass:"label"},[t._v(" "+t._s(t.$t("cardInfo_row_title_CardNo"))+": ")]),a("div",{ref:"secret-data-card-number",staticClass:"gray-text"})]),a("div",{staticClass:"action"},[a("div",{ref:"copy-btn"})])])])]),a("div",{staticClass:"listWithActionsv2",on:{click:t.payHistory}},[a("ul",[a("li",{staticClass:"action-box"},[a("div",{staticClass:"details"},[a("p",{staticClass:"label"},[t._v(" "+t._s(t.$t("cardInfo_row_title_transactions"))+" ")])]),t._m(0)])])]),a("div",{staticClass:"listWithActionsv2"},[a("h4",{staticClass:"header-2"},[t._v(" "+t._s(t.$t("cardInfo_section_actions"))+" ")]),a("ul",[a("li",{staticClass:"cursor-auto"},[a("div",{staticClass:"details"},[a("p",{staticClass:"label"},[t._v(" "+t._s(t.$t("cardInfo_row_title_freeze"))+" ")])]),a("div",{staticClass:"action"},[a("el-switch",{attrs:{"active-color":"var(--branding)","inactive-color":"#dfdfe4"},on:{change:t.toggleFreeze},model:{value:t.freezeCard,callback:function(e){t.freezeCard=e},expression:"freezeCard"}})],1)]),a("li",{staticClass:"cursor-auto"},[a("div",{staticClass:"details"},[a("p",{staticClass:"label"},[t._v(" "+t._s(t.$t("card_label"))+" : "),a("span",{staticClass:"gray-text"},[t._v(t._s(t.getSelectedCard.label))])])]),a("div",{staticClass:"action action--text"},[a("a",{attrs:{href:"#"},on:{click:function(e){return t.edit(e)}}},[t._v(t._s(t.$t("Edit")))])])]),a("li",{staticClass:"cursor-auto"},[a("div",{staticClass:"details"},[a("p",{staticClass:"label"},[t._v(" "+t._s(t.$t("card_spendLimit"))+" : "),a("span",{staticClass:"green-text"},[t._v(t._s(t._f("currency")(t.spendingLimit)))])])]),a("div",{staticClass:"action action--text"},[a("a",{attrs:{href:"#"},on:{click:function(e){return t.edit(e)}}},[t._v(t._s(t.$t("Edit")))])])]),a("li",{staticClass:"cursor-auto",on:{click:t.atmInfo}},[a("div",{staticClass:"details"},[a("p",{staticClass:"label"},[t._v(" "+t._s(t.$t("info_ATM"))+" ")])]),t._m(1)]),a("li",{staticClass:"d-none",on:{click:t.replaceCard}},[t._m(2),t._m(3),t._m(4)]),a("li",{on:{click:t.deleteCard}},[a("div",{staticClass:"details"},[a("p",{staticClass:"label"},[t._v(" "+t._s(t.$t("cardInfo_row_title_cancel"))+" ")])]),t._m(5)]),a("li",{staticClass:"get-in-touch cursor-default",on:{click:t.openHelp}},[a("div",{staticClass:"details"},[a("p",{staticClass:"label"},[t._v(" "+t._s(t.$t("cardInfo_row_title_help"))+" ")])]),t._m(6)])])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"action"},[a("span",{staticClass:"icon-Arrow-small-right"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"action"},[a("span",{staticClass:"icon-arrow-right"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"icon"},[a("span",{staticClass:"icon-paperplane"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"details"},[a("p",{staticClass:"label"},[t._v(" Replace card ")]),a("p",{staticClass:"value"},[t._v(" You can request a new card here ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"action"},[a("span",{staticClass:"icon-Arrow-small-right"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"action"},[a("span",{staticClass:"icon-Arrow-small-right"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"action"},[a("span",{staticClass:"icon-Arrow-small-right"})])}],r=a(629),c=a(9651),l=a(714),n={name:"CardManagement",components:{Card:l.Z},data(){return{freezeCard:!1,flippedCard:!1,cardNumber:""}},created(){this.getSelectedCard&&(this.freezeCard="inactive"===this.getSelectedCard.cardStatus)},computed:{...(0,r.Se)("card",["getSelectedCard"]),...(0,r.Se)("user",["getPersonDetails","getUserAuthToken"]),...(0,r.Se)("kyb",["getSelectedBusiness"]),status(){return c.l3[this.getSelectedCard.cardStatus]},spendingLimit(){return this.getSelectedCard.limitAmount},type(){return c.Iw[this.getSelectedCard.cardType]}},methods:{...(0,r.nv)("card",["cardDelete","updateCard"]),...(0,r.OI)("card",["updateSelectedCard","updateReplaceCardDate"]),...(0,r.OI)("transaction",["updateFilters"]),cancel(){this.drawerClose()},done(){this.drawerClose()},deleteCard(){this.$confirm(this.$t("cardInfo_cancel_alert_messsage"),this.$t("cardInfo_cancel_alert_title"),{confirmButtonText:"Yes",cancelButtonText:"No"}).then((()=>{const t=this.showLoader();this.cardDelete(this.getSelectedCard.id).then((()=>{setTimeout((()=>{this.drawerClose(),this.$emit("refresh"),this.updateSelectedCard(null)}),0)})).catch((t=>{console.log(t),this.apiErrorMessage(t)})).finally((()=>{t.close()}))})).catch((()=>{}))},replaceCard(){this.drawerPush("ReplaceCardReason")},showDetails(){this.updateReplaceCardDate(null),this.drawerPush("CardDetails")},toggleFreeze(){this.$confirm(this.$t(this.freezeCard?"cardInfo_freeze_alert_messsage":"cardInfo_unfreeze_alert_messsage"),this.$t(this.freezeCard?"cardInfo_freeze_alert_title":"cardInfo_unfreeze_alert_title"),{confirmButtonText:this.freezeCard?this.$t("cardInfo_freeze_button"):this.$t("cardInfo_unfreeze_button"),cancelButtonText:this.$t("cancel")}).then((()=>{this.freeze()})).catch((()=>{this.freezeCard=!this.freezeCard}))},freeze(){const t=this.showLoader();this.updateCard({cardId:this.getSelectedCard.id,payload:{cardStatus:this.freezeCard?"inactive":"active"}}).then((()=>{this.$emit("refresh")})).catch((t=>{console.log(t),this.apiErrorMessage(t)})).finally((()=>{t.close()}))},onUpdate(){this.$emit("refresh")},payHistory(){this.updateFilters({cardId:this.getSelectedCard.id,contactId:null}),this.$router.push("/transaction/list")},time(){return(new Date).getTime()},edit(t){t.preventDefault(),this.drawerPush("CardSpendingForm")},cardNumberDisplay({show:t,headers:e}){const a=t.request({name:"cardNoIframe2",method:"GET",headers:e,path:`/v1/card/${this.getSelectedCard.id}/show`,jsonPathSelector:"cardNumber",serializers:[t.SERIALIZERS.replace("(\\d{4})(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3 $4")]});a.render(this.$refs["secret-data-card-number"],{color:"gray",fontSize:"16px",display:"block",height:"16px"});const s=t.copyFrom(a,{text:'<svg width="13" height="13" viewBox="0 0 30 30" style="/* margin-left: calc(50% - 0.45849609375em) */"><g transform="scale(0.03125 0.03125)"><path d="M373.336 832c-99.969 0-181.336-81.374-181.336-181.338v-437.328h-74.664c-64.726 0-117.336 52.601-117.336 117.328v575.997c0 64.734 52.61 117.342 117.336 117.342h533.331c64.725 0 117.333-52.608 117.333-117.342v-74.658h-394.664z"></path><path d="M938.667 117.336c0-64.812-52.523-117.336-117.333-117.336h-447.997c-64.812 0-117.336 52.524-117.336 117.336v533.328c0 64.813 52.524 117.336 117.336 117.336h447.997c64.811 0 117.333-52.523 117.333-117.336v-533.328z"></path></g></svg>'},(t=>{if("success"===t){let t=this.$t("card");this.$notify({title:"Success",message:`${t} copied`,type:"success"})}}));s.render(this.$refs["copy-btn"],{cursor:"pointer",overflow:"hidden",left:"auto",right:"0",width:"auto"})},atmInfo(){this.drawerPush("AtmInfo")}},watch:{getSelectedCard:{handler(t){t&&(this.freezeCard="inactive"===t.cardStatus)}}}},d=n,o=a(3736),h=(0,o.Z)(d,s,i,!1,null,null,null),u=h.exports}}]);
//# sourceMappingURL=5469.1689683909628.js.map