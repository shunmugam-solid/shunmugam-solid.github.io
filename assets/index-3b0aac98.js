import{w as L,x as ue,y as le,z as de,C as H,r as O,h as pe,j as i,s as fe,t as ye,F as N,I as ge,A as me,H as ve,B as V,v as _e}from"./index-ee90a7d4.js";import{u as he,F as x}from"./layout-1702e57c.js";import{I as E}from"./chunk-6CVSDS6C-3f96b4ad.js";import{F as C}from"./chunk-XRMX4GAI-41420cf3.js";var Y={exports:{}},Pe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Oe=Pe,be=Oe;function J(){}function X(){}X.resetWarningCache=J;var Se=function(){function e(n,o,a,s,g,c){if(c!==be){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}e.isRequired=e;function r(){return e}var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:r,element:e,elementType:e,instanceOf:r,node:e,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:X,resetWarningCache:J};return t.PropTypes=t,t};Y.exports=Se();var we=Y.exports;function z(e,r){return e===r?e!==0||r!==0||1/e===1/r:e!==e&&r!==r}function Ae(e,r){if(z(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;const t=Object.keys(e),n=Object.keys(r);if(t.length!==n.length)return!1;for(let o=0;o<t.length;o++)if(!Object.prototype.hasOwnProperty.call(r,t[o])||!z(e[t[o]],r[t[o]]))return!1;return!0}function ee(e=L){const r=e===L?ue:le(e);return function(){const{store:n}=r();return n}}const Re=ee();function xe(e=L){const r=e===L?Re:ee(e);return function(){return r().dispatch}}const Ce=xe(),Ee=de,Me=()=>{const e=Ce(),r=Ee(n=>n.user.personDetails,Ae);return[r,(n,o)=>{if(typeof n=="string"){const a=n,s=o;a&&r&&r[a]!==void 0&&s!==void 0&&e(H({...r,[a]:s}))}else e(H(n))}]};var te={},B={},G={},A={};Object.defineProperty(A,"__esModule",{value:!0});A.loadGoogleMapScript=A.isBrowser=void 0;var re=typeof window<"u"&&window.document;A.isBrowser=re;var je=function(r,t){if(!re||typeof google<"u"&&google.maps&&google.maps.api)return Promise.resolve();var n=document.querySelectorAll('script[src*="'.concat(r,'"]'));if(n&&n.length)return new Promise(function(s){if(typeof google<"u")return s();n[0].addEventListener("load",function(){return s()})});var o=new URL(t);o.searchParams.set("callback","__REACT_GOOGLE_AUTOCOMPLETE_CALLBACK__");var a=document.createElement("script");return a.src=o.toString(),new Promise(function(s){window.__REACT_GOOGLE_AUTOCOMPLETE_CALLBACK__=s,document.body.appendChild(a)})};A.loadGoogleMapScript=je;var I={};Object.defineProperty(I,"__esModule",{value:!0});I.GOOGLE_MAP_SCRIPT_BASE_URL=void 0;var Te="https://maps.googleapis.com/maps/api/js";I.GOOGLE_MAP_SCRIPT_BASE_URL=Te;function T(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?T=function(t){return typeof t}:T=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(e)}Object.defineProperty(G,"__esModule",{value:!0});G.default=Ie;var y=Le(O),F=A,ke=I;function ne(e){if(typeof WeakMap!="function")return null;var r=new WeakMap,t=new WeakMap;return(ne=function(o){return o?t:r})(e)}function Le(e,r){if(!r&&e&&e.__esModule)return e;if(e===null||T(e)!=="object"&&typeof e!="function")return{default:e};var t=ne(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function Z(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),t.push.apply(t,n)}return t}function Q(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Z(Object(t),!0).forEach(function(n){We(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function We(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Be(e,r){if(e==null)return{};var t=Ge(e,r),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function Ge(e,r){if(e==null)return{};var t={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(r.indexOf(o)>=0)&&(t[o]=e[o]);return t}function Ie(e){var r=e.ref,t=e.onPlaceSelected,n=e.apiKey,o=e.libraries,a=o===void 0?"places":o,s=e.inputAutocompleteValue,g=s===void 0?"new-password":s,c=e.options;c=c===void 0?{}:c;var p=c.types,f=p===void 0?["(cities)"]:p,u=c.componentRestrictions,b=c.fields,v=b===void 0?["address_components","geometry.location","place_id","formatted_address"]:b,_=c.bounds,h=Be(c,["types","componentRestrictions","fields","bounds"]),M=e.googleMapsScriptBaseUrl,R=M===void 0?ke.GOOGLE_MAP_SCRIPT_BASE_URL:M,j=e.language,m=(0,y.useRef)(null),S=(0,y.useRef)(null),d=(0,y.useRef)(null),$=(0,y.useRef)(null),ie=j?"&language=".concat(j):"",D="".concat(R,"?libraries=").concat(a,"&key=").concat(n).concat(ie),ce=(0,y.useCallback)(function(){return(0,F.loadGoogleMapScript)(R,D)},[R,D]);return(0,y.useEffect)(function(){var w=Q(Q({},h),{},{fields:v,types:f,bounds:_});if(u&&(w.componentRestrictions=u),!(d.current||!m.current||!F.isBrowser)){r&&!r.current&&(r.current=m.current);var q=function(){var U;if(typeof google>"u")return console.error("Google has not been found. Make sure your provide apiKey prop.");if(!((U=google.maps)!==null&&U!==void 0&&U.places))return console.error("Google maps places API must be loaded.");if(!m.current instanceof HTMLInputElement)return console.error("Input ref must be HTMLInputElement.");d.current=new google.maps.places.Autocomplete(m.current,w),d.current&&(S.current=d.current.addListener("place_changed",function(){t&&d&&d.current&&t(d.current.getPlace(),m.current,d.current)}))};return n?ce().then(function(){return q()}):q(),function(){return S.current?S.current.remove():void 0}}},[]),(0,y.useEffect)(function(){var w;!(y.default!==null&&y.default!==void 0&&(w=y.default.version)!==null&&w!==void 0&&w.startsWith("18"))&&F.isBrowser&&window.MutationObserver&&m.current&&m.current instanceof HTMLInputElement&&($.current=new MutationObserver(function(){$.current.disconnect(),m.current&&(m.current.autocomplete=g)}),$.current.observe(m.current,{attributes:!0,attributeFilter:["autocomplete"]}))},[g]),(0,y.useEffect)(function(){d.current&&d.current.setFields(v)},[v]),(0,y.useEffect)(function(){d.current&&d.current.setBounds(_)},[_]),(0,y.useEffect)(function(){d.current&&d.current.setComponentRestrictions(u)},[u]),(0,y.useEffect)(function(){d.current&&d.current.setOptions(h)},[h]),{ref:m,autocompleteRef:d}}function k(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?k=function(t){return typeof t}:k=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(e)}Object.defineProperty(B,"__esModule",{value:!0});B.default=void 0;var K=Ue(O),l=oe(we),$e=oe(G);function oe(e){return e&&e.__esModule?e:{default:e}}function ae(e){if(typeof WeakMap!="function")return null;var r=new WeakMap,t=new WeakMap;return(ae=function(o){return o?t:r})(e)}function Ue(e,r){if(!r&&e&&e.__esModule)return e;if(e===null||k(e)!=="object"&&typeof e!="function")return{default:e};var t=ae(r);if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n}function W(){return W=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},W.apply(this,arguments)}function Fe(e,r){if(e==null)return{};var t=Ke(e,r),n,o;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}function Ke(e,r){if(e==null)return{};var t={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(r.indexOf(o)>=0)&&(t[o]=e[o]);return t}function se(e){var r=e.onPlaceSelected,t=e.apiKey,n=e.libraries,o=e.inputAutocompleteValue,a=e.options,s=e.googleMapsScriptBaseUrl,g=e.refProp,c=e.language,p=Fe(e,["onPlaceSelected","apiKey","libraries","inputAutocompleteValue","options","googleMapsScriptBaseUrl","refProp","language"]),f=(0,$e.default)({ref:g,googleMapsScriptBaseUrl:s,onPlaceSelected:r,apiKey:t,libraries:n,inputAutocompleteValue:o,options:a,language:c}),u=f.ref;return K.default.createElement("input",W({ref:u},p))}se.propTypes={apiKey:l.default.string,libraries:l.default.arrayOf(l.default.string),ref:l.default.oneOfType([l.default.func,l.default.shape({current:l.default.any})]),googleMapsScriptBaseUrl:l.default.string,onPlaceSelected:l.default.func,inputAutocompleteValue:l.default.string,options:l.default.shape({componentRestrictions:l.default.object,bounds:l.default.object,location:l.default.object,offset:l.default.number,origin:l.default.object,radius:l.default.number,sessionToken:l.default.object,types:l.default.arrayOf(l.default.string)}),language:l.default.string};var De=(0,K.forwardRef)(function(e,r){return K.default.createElement(se,W({},e,{refProp:r}))});B.default=De;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"usePlacesWidget",{enumerable:!0,get:function(){return t.default}});var r=n(B),t=n(G);function n(o){return o&&o.__esModule?o:{default:o}}})(te);var qe=te;const He=pe(qe),P=(e,r)=>e.find(t=>t.types.includes(r)),Ne=e=>{const{address_components:r,geometry:t}=e,n={},o=r,a=P(o,"premise"),s=P(o,"street_number"),g=P(o,"route");let c=P(o,"locality");const p=P(o,"sublocality_level_1"),f=P(o,"postal_town"),u=P(o,"administrative_area_level_1"),b=P(o,"country"),v=P(o,"postal_code"),_=[s,a,g];return c||(c=f||p),n.line1=_.filter(h=>h).map(h=>h.long_name).join(" "),n.line2=null,n.city=c?c.long_name:null,n.postalCode=v?v.long_name:null,n.state=u?u.short_name:null,n.country=b?b.short_name:null,n.latitude=t.location.lat,n.longitude=t.location.lng,n},Ve=({address:e,onChange:r,googleApiKey:t,placeholder:n,restrictedCountry:o,international:a})=>{const[s,g]=O.useState({...e}),[c,p]=O.useState((e==null?void 0:e.line1)||""),f=O.useRef(null),u=O.useMemo(()=>o||"US",[o]);O.useEffect(()=>{window.gm_authFailure=()=>(f.current.disabled=!1,f.current.placeholder="",f.current.style.backgroundImage="",f.current.focus(),!1)},[]),O.useEffect(()=>{e&&(g(e),p(e.line1))},[e]);const b=v=>{if(v){const{line1:_,line2:h,city:M,state:R,postalCode:j,country:m}=Ne(v),S={...s,line1:_,line2:h,city:M,state:R,country:m,postalCode:j};g(S),r(S),p(_)}};return i.jsx(E,{variant:"primary","data-testid":"address-line1",as:He,ref:f,apiKey:t,onPlaceSelected:b,value:c,placeholder:n||"",onChange:v=>{p(v.target.value);const _={...s,line1:v.target.value};a||(_.country=u),r(_)},options:{types:["address"],componentRestrictions:a?void 0:{country:u}}})},Xe=()=>{var g,c,p,f;const{t:e}=fe(),r=ye(),[t,n]=Me(),{isLoading:o,containerStyle:a}=he("fixed"),s=O.useMemo(()=>t&&!!t.address&&!!t.address.line1&&!!t.address.city&&!!t.address.state&&!!t.address.country&&!!t.address.postalCode&&t.address.line1.length!==0&&t.address.city.length!==0&&t.address.state.length!==0&&t.address.country.length!==0&&t.address.postalCode.length!==0,[t]);return console.log("isValid",s),i.jsx("div",{className:"page",children:i.jsx("form",{onSubmit:()=>{},autoComplete:"off",children:!o&&i.jsxs(N,{flexDirection:"column",style:a,children:[i.jsxs(N,{pb:"16px",borderBottomWidth:"1px",borderBottomColor:"#EAEAEA",justifyContent:"space-between",children:[i.jsx(ge,{variant:"ghost","aria-label":"",icon:i.jsx(me,{}),onClick:()=>{r(-1)}}),i.jsx(ve,{variant:"sectionTitle",children:"Personal Address"}),i.jsx("span",{})]}),i.jsxs(V,{width:"100%",flex:1,overflow:"auto",mt:"24px",children:[i.jsxs(C,{variant:"primary",children:[i.jsx(x,{variant:"primary",children:e("kycPersonAddress.address1")}),i.jsx(Ve,{googleApiKey:"AIzaSyDcW61NFxklslLuuUxNw0SzoBmHyC4Zhh4",address:(t==null?void 0:t.address)||void 0,placeholder:e("kycPersonAddress.address1"),onChange:u=>{n("address",{...u,addressType:"mailing"})}})]}),i.jsxs(C,{variant:"primary",children:[i.jsx(x,{variant:"primary",children:e("kycPersonAddress.address2")}),i.jsx(E,{variant:"primary","data-testid":"address-line2",value:(g=t==null?void 0:t.address)==null?void 0:g.line2,placeholder:e("kycPersonAddress.address2"),onChange:u=>{n("address",{...(t==null?void 0:t.address)||{},line2:u.target.value})}})]}),i.jsxs(C,{variant:"primary",children:[i.jsx(x,{variant:"primary",children:e("kycPersonAddress.addressCity")}),i.jsx(E,{variant:"primary","data-testid":"address-city",value:(c=t==null?void 0:t.address)==null?void 0:c.city,placeholder:e("kycPersonAddress.addressCity"),onChange:u=>{n("address",{...(t==null?void 0:t.address)||{},city:u.target.value})}})]}),i.jsxs(C,{variant:"primary",children:[i.jsx(x,{variant:"primary",children:e("kycPersonAddress.addressState")}),i.jsx(E,{variant:"primary","data-testid":"address-state",placeholder:e("kycPersonAddress.addressState"),value:(p=t==null?void 0:t.address)==null?void 0:p.state,onChange:u=>{n("address",{...(t==null?void 0:t.address)||{},state:u.target.value})}})]}),i.jsxs(C,{variant:"primary",children:[i.jsx(x,{variant:"primary",children:e("kycPersonAddress.addressZipcode")}),i.jsx(E,{variant:"primary","data-testid":"address-zipcode",placeholder:e("kycPersonAddress.addressZipcode"),value:(f=t==null?void 0:t.address)==null?void 0:f.postalCode,onChange:u=>{n("address",{...(t==null?void 0:t.address)||{},postalCode:u.target.value})}})]})]}),i.jsx(V,{children:i.jsx(_e,{w:"100%",variant:"primary",onClick:()=>{r("/dashboard")},children:e("kycPersonAddress.ctaText")})})]})})})};export{Xe as default};
