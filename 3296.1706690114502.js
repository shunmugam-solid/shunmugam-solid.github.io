(self["webpackChunkSolid"]=self["webpackChunkSolid"]||[]).push([[3296],{5177:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"el-input"},[n("the-mask",{ref:"percentageInput",staticClass:"el-input__inner",attrs:{mask:["##","##.#","##.##"],type:"tel",autocomplete:"off",name:"percentage",masked:!0,value:e.value},nativeOn:{input:function(t){return e.updateInput(t)}}})],1)},a=[],r=n(2982),i={components:{TheMask:r.TheMask},props:{value:{type:String,default:""},autofocus:{type:Boolean,default:!1}},mounted(){this.autofocus&&this.$refs.percentageInput.$el.focus()},methods:{updateInput(e){let t=e.target.value;t?this.$emit("input",t):this.$emit("input",null)}}},o=i,u=n(3736),c=(0,u.Z)(o,s,a,!1,null,"aef7c2a0",null),l=c.exports},3296:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"widgetContainer widgetContainer--center widgetContainer--scrollable yourOwnership"},[n("div",{staticClass:"navigationHeader"},[n("div",{staticClass:"navigationHeader__inner"},[n("span",{staticClass:"icon-Arrow-big-left cancel",on:{click:e.goToPreviousScreen}}),n("p",{staticClass:"title"},[e._v(" "+e._s(e.$t("addOwnerPercentage_NavTitle"))+" ")])])]),n("div",{staticClass:"widgetContainer__body"},[n("el-form",{staticClass:"wise-form",nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submit()},submit:function(e){e.preventDefault()}},model:{value:e.formData,callback:function(t){e.formData=t},expression:"formData"}},[n("div",{staticClass:"borderWrapper yourOwnership__switch-wrapper"},[n("p",{staticClass:"wise-form__header"},[e._v(" "+e._s(e.$t("addOwnerPercentage_Title"))+" ")]),n("div",{staticClass:"wise-form__text-with-switch"},[n("p",{staticClass:"wise-forn__info"},[e._v(" "+e._s(e.$t("addOwnerPercentage_Switch_Descriptions"))+" ")]),n("el-switch",{attrs:{"active-color":"var(--branding)","inactive-color":"#dfdfe4"},model:{value:e.greaterThan25,callback:function(t){e.greaterThan25=t},expression:"greaterThan25"}})],1)]),e.greaterThan25?n("el-form-item",{staticClass:"is-no-asterisk column-input",attrs:{prop:"percentage",label:e.$t("addOwnerPercentage_TextField_Descriptions")}},[e.greaterThan25?n("percentage-input",{staticClass:"is-no-asterisk",model:{value:e.formData.percentage,callback:function(t){e.$set(e.formData,"percentage",t)},expression:"formData.percentage"}}):e._e()],1):e._e(),n("p",{staticClass:"yourOwnership__verify-description wise-form__info"},[e._v(" "+e._s(e.$t("addOwnerPercentage_Descriptions"))+" ")])],1),n("div",{staticClass:"widgetContainer__footer--fixed"},[n("el-button",{staticClass:"el-button__brand brand",attrs:{type:"primary",disabled:e.isFormInValid},on:{click:e.submit}},[e._v(" "+e._s(e.$t("addOwnerPercentage_NextButton"))+" ")])],1)],1)])},a=[],r=n(5177),i=n(629),o=n(1956),u={components:{PercentageInput:r.Z},name:"YourOwnership",mixins:[o.Z],data(){return{formData:{percentage:null},greaterThan25:null,ownerDetails:null}},computed:{...(0,i.Se)("user",["getPersonDetails"]),isFormInValid(){return!!this.greaterThan25&&!(this.formData.percentage&&""!==this.formData.percentage&&!(""+this.formData.percentage).endsWith(".")&&this.formData.percentage>=25&&this.formData.percentage<=100)}},methods:{...(0,i.nv)("kyb",["fetchAllOwners","updateOwner"]),percentageValidation(e){const t=e.target.value;console.log("value",t);const n=parseFloat(t);Number.isNaN(n)&&e.preventDefault()},afterBusiness(){this.getAllOwners(this.getSelectedBusiness.id)},getAllOwners(e){const t=this.showLoader();this.fetchAllOwners(e).then((e=>{console.log(e),0!==e.data.length&&(this.ownerDetails=e.data.find((e=>e.person.id===this.getPersonDetails.id))||e.data[0],0!=this.ownerDetails.ownership&&(this.greaterThan25=!0,this.formData.percentage=this.ownerDetails.ownership))})).catch((e=>{console.log(e),this.apiErrorMessage(e)})).finally((()=>{t.close()}))},submit(){if(this.isFormInValid)return;this.greaterThan25||(this.formData.percentage=0);const e=this.ownerDetails;if(e){const t=this.showLoader();this.updateOwner({ownerId:e.id,details:{businessId:this.getSelectedBusiness.id,ownership:""+this.formData.percentage}}).then((()=>{this.$router.push("/kyb/ownersList")})).catch((e=>{console.log(e),this.apiErrorMessage(e)})).finally((()=>{t.close()}))}}}},c=u,l=n(3736),f=(0,l.Z)(c,s,a,!1,null,null,null),d=f.exports},1956:function(e,t,n){"use strict";var s=n(629);t["Z"]={computed:{...(0,s.Se)("kyb",["getSelectedBusiness"])},methods:{...(0,s.nv)("kyb",["fetchAllOwners","listAllBusiness","updateOwner"]),...(0,s.OI)("kyb",["setSelectedBusiness"])},created(){const e=this.getSelectedBusiness;if(e)this.afterBusiness&&"function"===typeof this.afterBusiness&&this.afterBusiness(e);else{const e=this.showLoader();this.listAllBusiness().then((e=>{if(0!==e.total){const t=e.data;this.setSelectedBusiness(t[0]),this.afterBusiness&&"function"===typeof this.afterBusiness&&setTimeout((()=>{this.afterBusiness(t[0])}),0)}})).catch((e=>{console.log(e),this.apiErrorMessage(e)})).finally((()=>{e.close()}))}}}},2982:function(e){(function(t,n){e.exports=n()})(0,(function(){return function(e){function t(s){if(n[s])return n[s].exports;var a=n[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,s){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:s})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=".",t(t.s=10)}([function(e,t){e.exports={"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},A:{pattern:/[a-zA-Z]/,transform:function(e){return e.toLocaleUpperCase()}},a:{pattern:/[a-zA-Z]/,transform:function(e){return e.toLocaleLowerCase()}},"!":{escape:!0}}},function(e,t,n){"use strict";function s(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}var a=n(2),r=n(0),i=n.n(r);t.a=function(e,t){var r=t.value;if((Array.isArray(r)||"string"==typeof r)&&(r={mask:r,tokens:i.a}),"INPUT"!==e.tagName.toLocaleUpperCase()){var o=e.getElementsByTagName("input");if(1!==o.length)throw new Error("v-mask directive requires 1 input, found "+o.length);e=o[0]}e.oninput=function(t){if(t.isTrusted){var i=e.selectionEnd,o=e.value[i-1];for(e.value=n.i(a.a)(e.value,r.mask,!0,r.tokens);i<e.value.length&&e.value.charAt(i-1)!==o;)i++;e===document.activeElement&&(e.setSelectionRange(i,i),setTimeout((function(){e.setSelectionRange(i,i)}),0)),e.dispatchEvent(s("input"))}};var u=n.i(a.a)(e.value,r.mask,!0,r.tokens);u!==e.value&&(e.value=u,e.dispatchEvent(s("input")))}},function(e,t,n){"use strict";var s=n(6),a=n(5);t.a=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments[3];return Array.isArray(t)?n.i(a.a)(s.a,t,i)(e,t,r,i):n.i(s.a)(e,t,r,i)}},function(e,t,n){"use strict";function s(e){e.component(u.a.name,u.a),e.directive("mask",i.a)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),r=n.n(a),i=n(1),o=n(7),u=n.n(o);n.d(t,"TheMask",(function(){return u.a})),n.d(t,"mask",(function(){return i.a})),n.d(t,"tokens",(function(){return r.a})),n.d(t,"version",(function(){return c}));var c="0.11.1";t.default=s,"undefined"!=typeof window&&window.Vue&&window.Vue.use(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),a=n(0),r=n.n(a),i=n(2);t.default={name:"TheMask",props:{value:[String,Number],mask:{type:[String,Array],required:!0},masked:{type:Boolean,default:!1},tokens:{type:Object,default:function(){return r.a}}},directives:{mask:s.a},data:function(){return{lastValue:null,display:this.value}},watch:{value:function(e){e!==this.lastValue&&(this.display=e)},masked:function(){this.refresh(this.display)}},computed:{config:function(){return{mask:this.mask,tokens:this.tokens,masked:this.masked}}},methods:{onInput:function(e){e.isTrusted||this.refresh(e.target.value)},refresh:function(e){this.display=e;e=n.i(i.a)(e,this.mask,this.masked,this.tokens);e!==this.lastValue&&(this.lastValue=e,this.$emit("input",e))}}}},function(e,t,n){"use strict";function s(e,t,n){return t=t.sort((function(e,t){return e.length-t.length})),function(s,a){for(var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=0;i<t.length;){var o=t[i];i++;var u=t[i];if(!(u&&e(s,u,!0,n).length>o.length))return e(s,o,r,n)}return""}}t.a=s},function(e,t,n){"use strict";function s(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments[3];e=e||"",t=t||"";for(var a=0,r=0,i="";a<t.length&&r<e.length;){var o=t[a],u=s[o],c=e[r];u&&!u.escape?(u.pattern.test(c)&&(i+=u.transform?u.transform(c):c,a++),r++):(u&&u.escape&&(a++,o=t[a]),n&&(i+=o),c===o&&r++,a++)}for(var l="";a<t.length&&n;){o=t[a];if(s[o]){l="";break}l+=o,a++}return i+l}t.a=s},function(e,t,n){var s=n(8)(n(4),n(9),null,null);e.exports=s.exports},function(e,t){e.exports=function(e,t,n,s){var a,r=e=e||{},i=typeof e.default;"object"!==i&&"function"!==i||(a=e,r=e.default);var o="function"==typeof r?r.options:r;if(t&&(o.render=t.render,o.staticRenderFns=t.staticRenderFns),n&&(o._scopeId=n),s){var u=o.computed||(o.computed={});Object.keys(s).forEach((function(e){var t=s[e];u[e]=function(){return t}}))}return{esModule:a,exports:r,options:o}}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{directives:[{name:"mask",rawName:"v-mask",value:e.config,expression:"config"}],attrs:{type:"text"},domProps:{value:e.display},on:{input:e.onInput}})},staticRenderFns:[]}},function(e,t,n){e.exports=n(3)}])}))}}]);
//# sourceMappingURL=3296.1706690114502.js.map