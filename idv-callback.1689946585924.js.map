{"version":3,"file":"idv-callback.1689946585924.js","mappings":"uJAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACJ,EAAIM,GAAG,iBAAiB,EAC9HC,EAAkB,G,6BCQtB,GACAC,OAAAA,CAAAA,EAAAA,GACAC,UACA,IACA,0DACA,2CAEA,UACAC,EAAAA,EAAAA,IAAAA,GACA,sBACA,yBACA,iDACA,wBAEA,mBACAC,OAAAA,eAAAA,WAAAA,oBACAA,OAAAA,eAAAA,WAAAA,UACA,MACA,wBAIA,CAFA,MACA,wBACA,CACA,EACAC,QAAAA,KACA,sDACA,yCACA,6BACAC,cACA,0BACA,iBACAC,MAAAC,IACAC,YAAAA,KACA,mBACA,EAFA,IAIAC,OAAAC,IACA,wBACAC,QAAAA,IAAAA,EAAAA,IAEAC,SAAA,KACAC,EAAAA,OAAAA,GAEA,EACAC,SAAAA,GACA,YACA,0BACA,qBACAR,MAAA,KACAE,YAAAA,KACA,wBACA,sCADA,GAGA,EAJA,IAMAC,OAAAC,IACAC,QAAAA,IAAAA,GACA,2BAEAC,SAAA,KACAC,EAAAA,OAAAA,GAEA,CACA,ICxE2S,I,UCOvSE,GAAY,OACd,EACAxB,EACAQ,GACA,EACA,KACA,KACA,MAIF,EAAegB,EAAiB,O","sources":["webpack://Solid/./src/modules/kyc/views/IdvCallback.vue?3f96","webpack://Solid/src/modules/kyc/views/IdvCallback.vue","webpack://Solid/./src/modules/kyc/views/IdvCallback.vue?06de","webpack://Solid/./src/modules/kyc/views/IdvCallback.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\" Loading... \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    Loading...\n  </div>\n</template>\n<script>\nimport { mapActions, mapMutations } from 'vuex';\nimport loginMixins from '@m/user/mixins/login';\nimport { setEnv } from '@/utils/env';\nexport default {\n  mixins: [loginMixins],\n  created() {\n    try {\n      const tokens = window.sessionStorage.getItem('user_auth_tokens');\n      const appEnv = window.sessionStorage.getItem('app_env');\n\n      if(tokens && appEnv) {\n        setEnv(appEnv);\n        const tokenJson = JSON.parse(tokens);\n        this.setUserAuthToken(tokenJson);\n        this.$http.defaults.headers.common.AUTHORIZATION =\n                'Bearer ' + tokenJson.accessToken;\n\n        this.verifyToken();\n        window.sessionStorage.removeItem('user_auth_tokens');\n        window.sessionStorage.removeItem('app_env');\n      } else {\n        this.goToWelcomeScreen();\n      }\n    } catch {\n      this.goToWelcomeScreen();\n    }\n  },\n  methods: {\n    ...mapActions('user', ['verifyOtp', 'getPerson', 'login']),\n    ...mapMutations('user', ['setUserAuthToken']),\n    ...mapActions('kyc', ['submitKyc']),\n    verifyToken() {\n      const loader = this.showLoader();\n      this.getPerson()\n        .then((res) => {\n          setTimeout(() => {\n            this.startKYC(res);\n          }, 0);\n        })\n        .catch((e) => {\n          this.apiErrorMessage(e);\n          console.log(e);\n        })\n        .finally(() => {\n          loader.close();\n        });\n    },\n    startKYC(person) {\n      if (person && person.id) {\n        const loader = this.showLoader();\n        this.submitKyc(person.id)\n          .then(() => {\n            setTimeout(() => {\n              this.loginSuccess(() => {\n                this.$router.push('/kyc/kycStatus');\n              });\n            }, 0);\n          })\n          .catch((e) => {\n            console.log(e);\n            this.apiErrorMessage(e);\n          })\n          .finally(() => {\n            loader.close();\n          });\n      }\n    }\n  }\n}\n</script>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./IdvCallback.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./IdvCallback.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./IdvCallback.vue?vue&type=template&id=431b0294&\"\nimport script from \"./IdvCallback.vue?vue&type=script&lang=js&\"\nexport * from \"./IdvCallback.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","staticRenderFns","mixins","created","setEnv","window","methods","verifyToken","then","res","setTimeout","catch","e","console","finally","loader","startKYC","component"],"sourceRoot":""}