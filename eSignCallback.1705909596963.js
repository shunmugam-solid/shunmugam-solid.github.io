"use strict";(self["webpackChunkSolid"]=self["webpackChunkSolid"]||[]).push([[7785],{8034:function(e,s,t){t.r(s),t.d(s,{default:function(){return u}});var n=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",[e._v(" Loading... ")])},i=[],o=t(629),r=t(2424),a=t(9896),h={mixins:[r.Z],created(){try{const e=window.sessionStorage.getItem("user_auth_tokens"),s=window.sessionStorage.getItem("app_env"),t=window.sessionStorage.getItem("business_id");if(e&&s&&t){(0,a.Nb)(s);const n=JSON.parse(e);this.setUserAuthToken(n),this.$http.defaults.headers.common.AUTHORIZATION="Bearer "+n.accessToken,this.verifyToken(t),window.sessionStorage.removeItem("user_auth_tokens"),window.sessionStorage.removeItem("app_env"),window.sessionStorage.removeItem("business_id")}else this.goToWelcomeScreen()}catch{this.goToWelcomeScreen()}},methods:{...(0,o.nv)("user",["verifyOtp","getPerson","login"]),...(0,o.OI)("user",["setUserAuthToken"]),...(0,o.nv)("kyb",["submitKyb","fetchBusiness"]),verifyToken(e){const s=this.showLoader();Promise.all([this.getPerson(),this.fetchBusiness(e)]).then((([e,s])=>{setTimeout((()=>{this.startKYB(e,s)}),0)})).catch((e=>{this.apiErrorMessage(e),console.log(e)})).finally((()=>{s.close()}))},startKYB(e,s){if(e&&e.id&&s&&s.id){const e=this.showLoader();this.submitKyb(s.id).then((()=>{setTimeout((()=>{this.loginSuccess((()=>{const e=this.$route.query.event;if("signing_complete"===e)this.$router.push("/kyb/businessStatus");else{const s={access_code_failed:"Something went wrong, please try again.",cancel:"Something went wrong, please try again.",decline:"Something went wrong, please try again.",exception:"Something went wrong, please try again.",fax_pending:"Something went wrong, please try again.",id_check_failed:"Something went wrong, please try again.",session_timeout:"Session timeout, please try again.",ttl_expired:"Session timeout, please try again."};this.$apiErrorMessage(s[e]||"Something went wrong, please try again."),this.$router.push("/kyb/ownership")}}))}),0)})).catch((e=>{console.log(e),this.apiErrorMessage(e)})).finally((()=>{e.close()}))}}}},g=h,l=t(3736),c=(0,l.Z)(g,n,i,!1,null,null,null),u=c.exports}}]);
//# sourceMappingURL=eSignCallback.1705909596963.js.map