"use strict";(self.webpackChunkdrop_in_ui=self.webpackChunkdrop_in_ui||[]).push([[6156],{5744:function(n,e,t){t(2791);var r=t(5798),i=t(184);e.Z=function(n){var e=n.value,t=n.placeholder,o=n.onChange;return(0,i.jsx)(r.II,{type:"number",variant:"primary",value:e,"data-testid":"percentage-input",placeholder:t,onChange:function(n){if(!n.target.value.startsWith("0")){var e=parseInt(n.target.value);if(!(e>100)){var t=!Number.isNaN(e)&&e>25;o(e,t)}}}})}},5808:function(n,e,t){t.d(e,{$N:function(){return s},Ny:function(){return o},T8:function(){return a},Z2:function(){return i}});var r=t(3152),i=function(n){return{type:r.km,payload:n}},o=function(n){return{type:r.z0,payload:n}},a=function(n){return{type:r.KY,payload:n}},s=function(n){return{type:r.fY,payload:n}}},9270:function(n,e,t){t.d(e,{Am:function(){return u},NB:function(){return c},RG:function(){return p},XD:function(){return h},gb:function(){return d},lM:function(){return f},mi:function(){return s},vd:function(){return l},zL:function(){return a}});var r=t(80),i=t(286),o=t(5808),a=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(t){return new Promise((function(a,s){(0,r.V_)(!0);var u="v1/business?include=accounts&limit=".concat(n,"&offset=").concat(e);i.Z.get(u).then((function(n){var e=n.data;t((0,o.Z2)(e.data)),a(e)})).catch((function(n){n.response&&n.response.data?s(n.response.data):s(n)})).finally((function(){(0,r.V_)(!1)}))}))}},s=function(n){return function(e){return new Promise((function(t,a){(0,r.V_)(!0),i.Z.post("v1/business",n).then((function(n){var r=n.data;e((0,o.Ny)(r)),t(r)})).catch((function(n){n.response&&n.response.data?a(n.response.data):a(n)})).finally((function(){(0,r.V_)(!1)}))}))}},u=function(n,e){return function(t){return new Promise((function(a,s){(0,r.V_)(!0),i.Z.patch("v1/business/".concat(n),e).then((function(n){var e=n.data;t((0,o.Ny)(e)),a(e)})).catch((function(n){n.response&&n.response.data?s(n.response.data):s(n)})).finally((function(){(0,r.V_)(!1)}))}))}},c=function(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(){return new Promise((function(t,o){e&&(0,r.V_)(!0);var a="v1/business/".concat(n);i.Z.get(a).then((function(n){var e=n.data;t(e)})).catch((function(n){n.response&&n.response.data?o(n.response.data):o(n)})).finally((function(){e&&(0,r.V_)(!1)}))}))}},f=function(n){return function(e){return new Promise((function(t,a){(0,r.V_)(!0),i.Z.get("v1/owner?businessId=".concat(n)).then((function(n){var r=n.data;e((0,o.T8)(r.data)),t(r)})).catch((function(n){n.response&&n.response.data?a(n.response.data):a(n)})).finally((function(){(0,r.V_)(!1)}))}))}},d=function(n){return function(){return new Promise((function(e,t){(0,r.V_)(!0),i.Z.post("v1/business/".concat(n,"/kyb"),{businessId:n}).then((function(n){var t=n.data;e(t)})).catch((function(n){n.response&&n.response.data?t(n.response.data):t(n)})).finally((function(){(0,r.V_)(!1)}))}))}},p=function(n,e){return function(){return new Promise((function(t,o){(0,r.V_)(!0),i.Z.patch("v1/owner/".concat(n),e).then((function(n){var e=n.data;t(e)})).catch((function(n){n.response&&n.response.data?o(n.response.data):o(n)})).finally((function(){(0,r.V_)(!1)}))}))}},l=function(n){return function(){return new Promise((function(e,t){(0,r.V_)(!0),i.Z.post("v1/owner",n).then((function(n){var t=n.data;e(t)})).catch((function(n){n.response&&n.response.data?t(n.response.data):t(n)})).finally((function(){(0,r.V_)(!1)}))}))}},h=function(n){return function(){return new Promise((function(e,t){(0,r.V_)(!0),i.Z.post("v1/owner/".concat(n,"/kyc")).then((function(n){var t=n.data;e(t)})).catch((function(n){n.response&&n.response.data?t(n.response.data):t(n)})).finally((function(){(0,r.V_)(!1)}))}))}}},6156:function(n,e,t){t.r(e);var r=t(9439),i=t(2791),o=t(2020),a=t(1938),s=t(8735),u=t(2504),c=t(3393),f=t(5048),d=t(7689),p=t(5649),l=t(5304),h=t(9270),v=t(80),m=t(5744),y=t(184);e.default=function(){var n=(0,o.$)().t,e=(0,d.s0)(),t=(0,l.Qo)(),b=(0,a.mq)("FormControl",{variant:"primary"}),w=(0,l.CG)((function(n){return n.business}),f.wU),_=w.selectedBusinessOwner,N=w.selectedBusiness,V=(0,i.useState)(null!==_&&void 0!==_&&_.ownership?parseInt(null===_||void 0===_?void 0:_.ownership,10):""),x=(0,r.Z)(V,2),g=x[0],Z=x[1],j=(0,i.useMemo)((function(){return!Number.isNaN(g)&&g>=25&&g<=100}),[g]),k=(0,i.useCallback)((function(n){t((0,h.XD)(n)).then((function(){e("/ao/kyb/ownersList")})).catch(v.WH)}),[]),T=(0,i.useCallback)((function(){null!==_&&void 0!==_&&_.id&&_.person.address?t((0,h.RG)(null===_||void 0===_?void 0:_.id,{ownership:"".concat(g),person:{firstName:_.person.firstName,lastName:_.person.lastName,email:_.person.email,dateOfBirth:_.person.dateOfBirth,phone:_.person.phone,idNumber:_.person.idNumber.replaceAll("-",""),idType:_.person.idType,address:_.person.address}})).then((function(){setTimeout((function(){k(_.id)}),0)})).catch(v.WH):_&&N&&_.person.address&&t((0,h.vd)({businessId:N.id,ownership:"".concat(g),person:{firstName:_.person.firstName,lastName:_.person.lastName,email:_.person.email,dateOfBirth:_.person.dateOfBirth,phone:_.person.phone,idNumber:_.person.idNumber.replaceAll("-",""),idType:_.person.idType,address:_.person.address}})).then((function(n){var e=n.id;setTimeout((function(){k(e)}),0)})).catch(v.WH)}),[_,g]);return(0,y.jsx)("div",{className:"page",children:(0,y.jsx)("form",{onSubmit:function(n){n.preventDefault(),T()},children:(0,y.jsx)(p.Z,{varient:"box",heading:n("their_ownership.title"),footer:(0,y.jsxs)(s.xu,{children:[(0,y.jsx)(s.xv,{variant:"small",pb:"16px",children:n("their_ownership.toHelp")}),(0,y.jsx)(u.zx,{"data-testid":"submit-btn",width:"100%",variant:"primary",disabled:!j,type:"submit",children:n("their_ownership.ctaText")})]}),children:(0,y.jsx)(s.xu,{width:"100%",children:(0,y.jsxs)(c.NI,{variant:"primary",style:b,children:[(0,y.jsx)(c.lX,{variant:"primary",children:n("their_ownership.enterTheirOwnership")}),(0,y.jsx)(m.Z,{placeholder:n("their_ownership.percentageValue"),value:g,onChange:Z})]})})})})})}}}]);
//# sourceMappingURL=6156.08f59b63.chunk.js.map