"use strict";(self.webpackChunkdrop_in_ui=self.webpackChunkdrop_in_ui||[]).push([[9551],{5808:function(n,t,e){e.d(t,{$N:function(){return s},Ny:function(){return o},T8:function(){return i},Z2:function(){return a}});var r=e(3152),a=function(n){return{type:r.km,payload:n}},o=function(n){return{type:r.z0,payload:n}},i=function(n){return{type:r.KY,payload:n}},s=function(n){return{type:r.fY,payload:n}}},9270:function(n,t,e){e.d(t,{Am:function(){return u},NB:function(){return c},RG:function(){return l},XD:function(){return h},gb:function(){return d},lM:function(){return f},mi:function(){return s},vd:function(){return p},zL:function(){return i}});var r=e(80),a=e(286),o=e(5808),i=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(e){return new Promise((function(i,s){(0,r.V_)(!0);var u="v1/business?include=accounts&limit=".concat(n,"&offset=").concat(t);a.Z.get(u).then((function(n){var t=n.data;e((0,o.Z2)(t.data)),i(t)})).catch((function(n){n.response&&n.response.data?s(n.response.data):s(n)})).finally((function(){(0,r.V_)(!1)}))}))}},s=function(n){return function(t){return new Promise((function(e,i){(0,r.V_)(!0),a.Z.post("v1/business",n).then((function(n){var r=n.data;t((0,o.Ny)(r)),e(r)})).catch((function(n){n.response&&n.response.data?i(n.response.data):i(n)})).finally((function(){(0,r.V_)(!1)}))}))}},u=function(n,t){return function(e){return new Promise((function(i,s){(0,r.V_)(!0),a.Z.patch("v1/business/".concat(n),t).then((function(n){var t=n.data;e((0,o.Ny)(t)),i(t)})).catch((function(n){n.response&&n.response.data?s(n.response.data):s(n)})).finally((function(){(0,r.V_)(!1)}))}))}},c=function(n){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(){return new Promise((function(e,o){t&&(0,r.V_)(!0);var i="v1/business/".concat(n);a.Z.get(i).then((function(n){var t=n.data;e(t)})).catch((function(n){n.response&&n.response.data?o(n.response.data):o(n)})).finally((function(){t&&(0,r.V_)(!1)}))}))}},f=function(n){return function(t){return new Promise((function(e,i){(0,r.V_)(!0),a.Z.get("v1/owner?businessId=".concat(n)).then((function(n){var r=n.data;t((0,o.T8)(r.data)),e(r)})).catch((function(n){n.response&&n.response.data?i(n.response.data):i(n)})).finally((function(){(0,r.V_)(!1)}))}))}},d=function(n){return function(){return new Promise((function(t,e){(0,r.V_)(!0),a.Z.post("v1/business/".concat(n,"/kyb"),{businessId:n}).then((function(n){var e=n.data;t(e)})).catch((function(n){n.response&&n.response.data?e(n.response.data):e(n)})).finally((function(){(0,r.V_)(!1)}))}))}},l=function(n,t){return function(){return new Promise((function(e,o){(0,r.V_)(!0),a.Z.patch("v1/owner/".concat(n),t).then((function(n){var t=n.data;e(t)})).catch((function(n){n.response&&n.response.data?o(n.response.data):o(n)})).finally((function(){(0,r.V_)(!1)}))}))}},p=function(n){return function(){return new Promise((function(t,e){(0,r.V_)(!0),a.Z.post("v1/owner",n).then((function(n){var e=n.data;t(e)})).catch((function(n){n.response&&n.response.data?e(n.response.data):e(n)})).finally((function(){(0,r.V_)(!1)}))}))}},h=function(n){return function(){return new Promise((function(t,e){(0,r.V_)(!0),a.Z.post("v1/owner/".concat(n,"/kyc")).then((function(n){var e=n.data;t(e)})).catch((function(n){n.response&&n.response.data?e(n.response.data):e(n)})).finally((function(){(0,r.V_)(!1)}))}))}}},9551:function(n,t,e){e.r(t),e.d(t,{default:function(){return _}});var r=e(2791),a=e(2020),o=e(8735),i=e(2504),s=e(5048),u=e(7689),c=e(5649),f="AddOwners_addOwners__F2ERY",d="AddOwners_owners__MN4eu",l="AddOwners_owner__KdZDg",p=e(5304),h=e(9270),v=e(5808),w=e(4144),x=e(184),_=function(){var n=(0,a.$)().t,t=(0,u.s0)(),e=(0,p.Qo)(),_=(0,p.CG)((function(n){return n.business.owners}),s.wU),m=(0,p.CG)((function(n){return n.business.selectedBusiness}),s.wU),y=(0,r.useMemo)((function(){return _.reduce((function(n,t){return n+parseInt(t.ownership)}),0)}),[_]),g=(0,r.useCallback)((function(n){e((0,v.$N)(n)),setTimeout((function(){t("/ao/kyb/ownerDetails")}),0)}),[]);return(0,r.useEffect)((function(){m&&e((0,h.lM)(m.id))}),[m]),(0,x.jsx)("div",{className:"page",children:(0,x.jsx)("form",{onSubmit:function(n){n.preventDefault(),0!==y&&t("/ao/kyb/approved")},children:(0,x.jsx)(c.Z,{varient:"box",heading:n("add_owners.title"),showBack:!0,onBack:function(){t(-1)},footer:(0,x.jsxs)(o.xu,{children:[(0,x.jsx)(o.xv,{variant:"small",pb:"16px",children:n("add_owners.toHelp")}),(0,x.jsx)(i.zx,{width:"100%",variant:"primary",type:"submit",disabled:0===y,children:n("add_owners.ctaText")})]}),children:(0,x.jsxs)(o.xu,{width:"100%",children:[(0,x.jsx)(o.xv,{variant:"large",children:n("add_owners.ownerGreaterThan")}),(0,x.jsx)(o.xu,{"data-testid":"owners-list",className:d,children:_.map((function(n,t){return(0,x.jsxs)(o.xu,{"data-testid":"owners-data-".concat(t+1),className:l,onClick:function(){g(n)},children:[(0,x.jsxs)(o.xv,{variant:"regular",textAlign:"left",children:[n.person.firstName," ",n.person.lastName]}),(0,x.jsxs)(o.xv,{variant:"regular",textAlign:"right",className:"text-dark",children:[n.ownership,"%"]})]},"owner-".concat(n.id))}))}),y<=75?(0,x.jsxs)(o.xu,{pt:"15px","data-testid":"add-owner",children:[(0,x.jsx)(o.xv,{variant:"large",children:n("add_owners.addOwners")}),(0,x.jsx)(o.xu,{onClick:function(){e((0,v.$N)(null)),t("/ao/kyb/ownerDetails")},children:(0,x.jsxs)(o.kC,{className:f,children:[(0,x.jsx)(o.xv,{variant:"regular",textAlign:"left",children:n("add_owners.addOwnersGreaterThan")}),(0,x.jsx)(w.Z,{icon:"Arrow-small-right",size:12,className:"svg-light-grey-1"})]})})]}):null]})})})})}}}]);
//# sourceMappingURL=9551.641aad00.chunk.js.map