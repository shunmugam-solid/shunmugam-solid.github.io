"use strict";(self.webpackChunkdrop_in_ui=self.webpackChunkdrop_in_ui||[]).push([[3254],{8819:function(e,n,r){var t=r(2791),a=r(8735),s=r(3046),c=r(5048),i=r(2020),o=r(1098),l=r(5304),d=r(7208),u=r(80),h=r(2019),x=r(184),v=t.memo((function(e){var n=e.data,r=e.showSecrets,v=e.onReady,f=n,p=(0,i.$)().t,m=(0,l.Qo)(),g=(0,t.useRef)(null),_=(0,t.useRef)(null),j=(0,l.CG)((function(e){return e.core.programConfig}),c.wU),w=(0,l.CG)((function(e){return e.business.selectedBusiness}),c.wU),b=(0,t.useMemo)((function(){return"physical"===f.cardType?null===j||void 0===j?void 0:j.brand.cardArtPhysical:null===j||void 0===j?void 0:j.brand.cardArtVirtual}),[f,j]),C=(0,t.useMemo)((function(){return"physical"===f.cardType?null===j||void 0===j?void 0:j.brand.physicalCardTextColor:null===j||void 0===j?void 0:j.brand.virtualCardTextColor}),[f,j]),Z=(0,t.useCallback)((function(){(0,u.V_)(!0),m((0,d.ms)(n.id)).then((function(e){(0,u.V_)(!0);var r=setTimeout((function(){(0,u.V_)(!1)}),15e3),t=window.VGSShow.create((0,u.Ab)(),(function(e){var n,t;!0===(null===e||void 0===e||null===(n=e.cvvIframe)||void 0===n?void 0:n.revealed)&&!0===(null===e||void 0===e||null===(t=e.cardNoIframe)||void 0===t?void 0:t.revealed)&&(clearTimeout(r),(0,u.V_)(!1))})),a={"sd-show-token":e.showToken};t.request({name:"cardNoIframe",method:"GET",headers:a,path:"/v1/card/".concat(n.id,"/show"),jsonPathSelector:"cardNumber",serializers:[t.SERIALIZERS.replace("(\\d{4})(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3 $4")]}).render(g.current,{color:C,fontSize:"15px",height:"20px",overflow:"hidden",fontWeight:"700"}),t.request({name:"cvvIframe",method:"GET",headers:a,path:"/v1/card/".concat(n.id,"/show"),jsonPathSelector:"cvv"}).render(_.current,{color:C,fontSize:"13px",display:"block",height:"16px",overflow:"hidden"}),v&&v({show:t,headers:a})})).catch(u.WH).finally((function(){return(0,u.V_)(!1)}))}),[n]);return(0,t.useEffect)((function(){if(r){var e=document.createElement("script");e.id="vgs-script",e.crossOrigin="anonymous";e.src="https://js.verygoodvault.com/vgs-show/1.3/".concat("ACci3u9aEmutHr7zpAeVY2Zc",".js"),e.type="text/javascript",e.onload=Z,document.head.append(e)}return function(){var e;window.VGSShow=void 0,null===(e=document.getElementById("vgs-script"))||void 0===e||e.remove()}}),[r]),(0,x.jsxs)(a.xu,{opacity:"inactive"===f.cardStatus?"0.5":"1",className:"".concat(o.Z.card_image_info," ").concat(o.Z.cardList__card_image_info_white),children:[(0,x.jsx)(s.Ee,{className:o.Z.card_image,alt:"logo",src:b,fallbackSrc:h.Z,"data-testid":"card-img"}),(0,x.jsxs)(a.xu,{className:o.Z.card_details,children:[(0,x.jsxs)(a.xu,{pt:"14px",mb:"auto",children:[(0,x.jsx)(a.xv,{color:C,fontWeight:"500",fontSize:"10px",children:p("cards_list.".concat(f.cardType))}),(0,x.jsx)(a.xv,{color:"#A1A1A1",fontSize:"10px",children:"Limited Use"})]}),r?(0,x.jsx)(a.kC,{children:(0,x.jsx)(a.xu,{className:o.Z["secret-wrapper"],height:"20px",width:"60%",overflow:"hidden",ref:g,mb:"12px"})}):(0,x.jsxs)(a.xv,{color:C,fontWeight:"700",fontSize:"15px",pb:"8px",children:["**** **** ****"," ",f.last4]}),(0,x.jsxs)(a.Ug,{children:[(0,x.jsxs)(a.xu,{alignItems:"flex-start",mr:"40px",children:[(0,x.jsx)(a.xv,{color:"#A1A1A1",fontSize:"10px",children:p("cards_list.expDate")}),(0,x.jsxs)(a.xv,{color:C,fontSize:"13px",children:[f.expiryMonth,"/",f.expiryYear]})]}),(0,x.jsxs)(a.xu,{alignItems:"flex-start",children:[(0,x.jsx)(a.xv,{color:"#A1A1A1",fontSize:"10px",children:p("cards_list.cvv")}),r?(0,x.jsx)(a.xu,{className:o.Z["secret-wrapper"],height:"20px",width:"50px",ref:_}):(0,x.jsx)(a.xv,{color:C,fontSize:"13px",children:"***"})]})]}),(0,x.jsxs)(a.xu,{mt:"auto",children:[(0,x.jsx)(a.xv,{color:C,fontWeight:"700",fontSize:"9px",children:""!==f.embossingPerson?f.embossingPerson:f.cardholder.name}),(0,x.jsx)(a.xv,{color:C,fontWeight:"700",fontSize:"9px",children:""!==f.embossingBusiness?f.embossingBusiness:null===w||void 0===w?void 0:w.legalName})]})]})]})}));n.Z=v},3692:function(e,n,r){r.d(n,{T:function(){return a},z:function(){return t}});var t=function(e){return e.LOGOUT="logout",e.CARD_REFRESH="card_refresh",e.TRANSACTION_REFRESH="transaction_refresh",e}({}),a={_events:{},dispatch:function(e,n){this._events[e]&&this._events[e].forEach((function(e){return e(n)}))},subscribe:function(e,n){var r=this;this._events[e]||(this._events[e]=[]);var t=this._events[e].push(n);return function(){r.unsubscribe(e,t-1)}},unsubscribe:function(e,n){this._events[e]&&(void 0!==n&&this._events[e][n]?this._events[e].splice(n,1,(function(){})):delete this._events[e])}}},2559:function(e,n,r){var t=r(9439),a=r(2791),s=r(2020),c=r(8735),i=r(2504),o=r(5798),l=r(5048),d=r(4771),u=r(7689),h=r(4144),x=r(8709),v=r(5304),f=r(7208),p=r(80),m=r(8819),g=r(3746),_=r(1778),j=r(729),w=r(6559),b=r(1605),C=r(4661),Z=r(3692),A=r(184),N=a.lazy((function(){return r.e(2723).then(r.bind(r,2723))})),y=a.lazy((function(){return Promise.all([r.e(4398),r.e(3046)]).then(r.bind(r,9998))})),S=a.lazy((function(){return r.e(1708).then(r.bind(r,9944))})),k=a.forwardRef((function(e,n){var r=e.showSearch,k=e.showAddCard,z=e.cardsPerView,R=e.pagination,L=e.showExtendedDetails,E=e.showCompactView,T=(0,s.$)().t,D=(0,v.Qo)(),V=(0,a.useRef)(1),M=(0,C.y)().open,G=(0,u.s0)(),H=(0,a.useRef)(!1),I=(0,a.useRef)(""),U=(0,a.useState)(""),P=(0,t.Z)(U,2),$=P[0],W=P[1],B=(0,v.CG)((function(e){return e.core.config.mode})),O=(0,v.CG)((function(e){return e.card}),l.wU),F=O.cards,q=O.cardLoading,Q=(0,v.CG)((function(e){return e.account.selectedAccount}),l.wU),Y=(0,v.CG)((function(e){return e.user.personDetails}),l.wU),J=(0,v.CG)((function(e){return e.core.config}),l.wU).isDarkMode,X=(0,_.Vd)("cards").showDOSHRewards,K=(0,v.CG)((function(e){return e.core.programConfig}),l.wU),ee=(0,a.useMemo)((function(){return"0001"===(null===K||void 0===K?void 0:K.code)?k&&E&&F.data.length>0:k&&E}),[k,F,K,E]),ne=(0,a.useCallback)((function(){Q&&D((0,f.on)(Q.id,z,(V.current-1)*z,0===$.length?void 0:$)).catch(p.WH)}),[Q,z,V,$]),re=(0,a.useCallback)((function(){Y&&D((0,f.$e)(Y.id)).then((function(e){if(e){var n=btoa,r={jwt:e.accessToken};"live"!==B&&(r.debugLoggingEnabled=!0);var t="https://poweredby.dosh.com/partners/solidFi/setup/";t+=n(JSON.stringify(r)),window.open(t,"_blank")}})).catch(p.WH)}),[f.$e,Y]),te=(0,a.useCallback)((function(){D((0,g.Py)(null)),M(N)}),[]);(0,a.useEffect)((function(){return(0,p.pt)(null===K||void 0===K?void 0:K.brand.cardArtPhysical),(0,p.pt)(null===K||void 0===K?void 0:K.brand.cardArtVirtual),ne(),Z.T.subscribe(Z.z.CARD_REFRESH,(function(){console.log("refresh called"),V.current=1,ne()}))}),[Q]),(0,j.bX)((function(){H.current&&(V.current=1,I.current=$,ne())}),1e3,[$,H]),(0,a.useImperativeHandle)(n,(function(){return{cardListRefresh:function(){V.current=1,ne()}}}));var ae=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,A.jsx)(c.xu,{className:"".concat(x.Z.cardList__add_container," default-bg ").concat(e?x.Z.cardList__add_container_horizontal:""),onClick:te,children:(0,A.jsxs)(c.M5,{className:x.Z.cardList__add,children:[(0,A.jsx)(h.Z,{icon:"icon-add",className:"icon-customizable",size:40}),(0,A.jsx)(c.xv,{variant:"regular",pt:"10px",children:T("cards_list.addACard")})]})})},se=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,A.jsxs)(c.xu,{className:"".concat(x.Z.autoCardHeight," ").concat(0===F.data.length?x.Z.dBlock:""," "),children:[0===F.data.length&&0===I.current.length&&!H.current&&k&&"0001"===(null===K||void 0===K?void 0:K.code)&&X?(0,A.jsxs)(c.xu,{className:"".concat(J?x.Z.rewards_get_card_dark:""," ").concat(x.Z.rewards_get_card," ").concat(x.Z.is_large),children:[(0,A.jsxs)(c.xv,{className:x.Z.rewards_text,children:[T("cards_list.earnRewardsBy"),(0,A.jsx)(c.xv,{px:"4px",as:"span",color:"var(--blue-1)",children:T("cards_list.virtualCard")}),T("cards_list.today")]}),(0,A.jsxs)(i.zx,{className:x.Z.rewards_get_card_btn,onClick:function(){te()},children:[(0,A.jsx)(c.xv,{pr:"12px",children:T("cards_list.rewardsbtn")}),(0,A.jsx)(h.Z,{icon:"icon-Arrow-big-right",size:12,className:"color-white"})]})]}):0!==F.data.length&&0===I.current.length&&"0001"===(null===K||void 0===K?void 0:K.code)&&X?(0,A.jsx)(c.xu,{className:"".concat(J?x.Z.see_rewards_dark:""," ").concat(x.Z.see_rewards),onClick:function(){return re()},children:(0,A.jsxs)(c.xv,{className:x.Z.rewards_text,children:[T("cards_list.seeRewardsClickTo"),(0,A.jsx)(c.xv,{px:"4px",as:"span",color:"var(--blue-1)",children:T("cards_list.seeRewardsRewards")})]})}):0!==F.data.length||ee?null:(0,A.jsx)(c.M5,{py:2,children:(0,A.jsx)(c.xv,{variant:"regular",className:"text-light",textAlign:"center",children:T("cards_list.noData")})}),F.data.map((function(e){return(0,A.jsxs)(c.xu,{className:"".concat(x.Z.cardList__card_container," ").concat(L?"has-border":""," ").concat("inactive"===e.cardStatus?x.Z["cardList__card_container--freezed"]:""),onClick:function(){D((0,g.Vf)(e)),setTimeout((function(){M("pendingActivation"!==e.cardStatus?S:y,{id:e.id})}),0)},children:[(0,A.jsx)(m.Z,{data:e}),L?(0,A.jsx)(c.xu,{pt:3,children:(0,A.jsxs)(c.Ug,{className:x.Z.cardList__label_limit,children:[(0,A.jsxs)(c.xu,{w:"48%",children:[(0,A.jsx)(c.xv,{variant:"small",textAlign:"left",children:T("cards_list.label")}),(0,A.jsx)(c.xv,{variant:"regular",textAlign:"left",children:e.label})]}),(0,A.jsxs)(c.xu,{w:"52%",className:x.Z.cardList__spending_limit,children:[(0,A.jsx)(c.xv,{variant:"small",textAlign:"left",children:T("cards_list.spendingLimit")}),(0,A.jsxs)(c.xv,{variant:"regular",textAlign:"left",children:["$"," ",e.limitAmount]})]})]})}):null]},"card-".concat(e.id))})),ee?ae(e):null]})},ce=(0,a.useCallback)((function(){G("/cards")}),[]);return(0,A.jsx)(c.M5,{className:"page",height:"100%",children:q&&1===V.current&&!H.current?(0,A.jsx)(w.Z,{name:E?"CardGrid":"CardList",showHeader:!E}):(0,A.jsxs)(c.xu,{width:"100%",flexDirection:"column",height:"100%",display:"flex",children:[(0,A.jsxs)(c.xu,{p:E?"":"15px",children:[(0,A.jsxs)(c.Ug,{width:"100%",justifyContent:"space-between",mb:"24px",children:[(0,A.jsx)(c.xv,{variant:"large",children:T("cards_list.title")}),E?(0,A.jsxs)(c.xv,{variant:"regular",className:"text-light",fontSize:"16px",cursor:"pointer",onClick:ce,children:[T("cards_list.viewAll"),(0,A.jsx)(h.Z,{style:{marginLeft:"10px"},icon:"Arrow-small-right",size:12,className:"svg-light-grey-1"})]}):null]}),(0,A.jsxs)(c.Ug,{mt:"16px",children:[r&&!E?(0,A.jsxs)(c.xu,{className:x.Z.cardList__search,children:[(0,A.jsx)(h.Z,{icon:"icon-search",className:x.Z.cardList__search__icon,size:18}),(0,A.jsx)(o.II,{placeholder:T("cards_list.searchCards"),variant:"primary",className:x.Z.cardList__search__input,onChange:function(e){H.current=!0,W(e.target.value)},value:$})]}):null,k&&r&&!E?(0,A.jsxs)(c.M5,{className:"".concat(x.Z.contactAddContainer," button-icon-bg"),onClick:te,children:[(0,A.jsx)(h.Z,{className:"dark-color",icon:"icon-plus",size:16}),(0,A.jsx)(c.xv,{className:"".concat(x.Z.contactAddTxt," dark-color"),children:T("select_contact.add")})]}):null]})]}),q&&H.current?(0,A.jsx)(w.Z,{name:"CardList",showHeader:!1}):E?(0,A.jsx)("div",{className:x.Z.scrollableDivHorizontal,id:"scrollableDiv",children:se(!0)}):(0,A.jsx)("div",{className:x.Z.scrollableDiv,id:"scrollableDiv",children:(0,A.jsx)(d.Z,{dataLength:F.data.length,next:function(){V.current+=1,ne()},hasMore:R&&F.data.length<F.total&&0!==F.total,loader:(0,A.jsx)(c.M5,{my:3,children:(0,A.jsx)(b.Z,{showModal:!1,show:!0})}),endMessage:q?null:(0,A.jsx)(c.M5,{py:2,children:(0,A.jsx)(c.xv,{variant:"regular",className:"text-light",textAlign:"center",children:T(0===F.total?k?"":"cards_list.noData":"cards_list.noMoreCards")})}),scrollableTarget:"scrollableDiv",children:se()})})]})})}));n.Z=k},5696:function(e,n,r){r.r(n);r(2791);var t=r(2559),a=r(184);n.default=function(){return(0,a.jsx)(t.Z,{showSearch:!0,showAddCard:!0,cardsPerView:10,pagination:!0,showExtendedDetails:!0,showCompactView:!1})}}}]);
//# sourceMappingURL=3254.69e0cfe3.chunk.js.map