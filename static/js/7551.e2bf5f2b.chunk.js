"use strict";(self.webpackChunkdrop_in_ui=self.webpackChunkdrop_in_ui||[]).push([[7551],{2364:function(n,t,e){e.d(t,{BZ:function(){return a},Pk:function(){return o},m4:function(){return c}});var r=e(7271),a=function(n){return{type:r.rN,payload:n}},o=function(n){return{type:r.bP,payload:n}},c=function(n){return{type:r.Z8,payload:n}}},7770:function(n,t,e){e.d(t,{GK:function(){return s},Tk:function(){return u},cX:function(){return p},mk:function(){return f},r5:function(){return l},rE:function(){return d}});var r=e(3433),a=e(1413),o=e(286),c=e(80),i=e(2364),d=function(n){return function(){return new Promise((function(t,e){(0,c.V_)(!0),o.Z.post("v1/contact",n).then((function(n){var e=n.data;t(e)})).catch(e).finally((function(){(0,c.V_)(!1)}))}))}},u=function(n,t){return function(e){return new Promise((function(r,a){(0,c.V_)(!0),o.Z.patch("v1/contact/".concat(n),t).then((function(n){var t=n.data;e((0,i.m4)(t)),r(t)})).catch(a).finally((function(){(0,c.V_)(!1)}))}))}},s=function(n){return function(){return new Promise((function(t,e){(0,c.V_)(!0),o.Z.delete("v1/contact/".concat(n)).then((function(n){var e=n.data;t(e)})).catch((function(n){e(n)})).finally((function(){(0,c.V_)(!1)}))}))}},l=function(n){return function(){return new Promise((function(t,e){(0,c.V_)(!0),(0,o.Z)("v1/contact/".concat(n,"/debitcard/token"),{method:"POST"}).then((function(n){var e=n.data;t(e)})).catch(e).finally((function(){(0,c.V_)(!1)}))}))}},f=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"others",u=arguments.length>5?arguments[5]:void 0;return function(s,l){return new Promise((function(f,p){var h="v1/contact?accountId=".concat(n,"&type=").concat(d,"&limit=").concat(t,"&offset=").concat(e);c&&(h="".concat(h,"&query=").concat(c)),u&&Object.keys(u).forEach((function(n){h+="&".concat(n,"=").concat(u[n])})),s((0,i.Pk)(!0)),o.Z.get(h).then((function(n){var t=n.data,o=t;if(0!==e){var c=l(),d=(0,a.Z)({},c.contact.contacts);o={data:[].concat((0,r.Z)(d.data),(0,r.Z)(t.data)),total:t.total}}s((0,i.BZ)(o)),f(o)})).catch(p).finally((function(){s((0,i.Pk)(!1))}))}))}},p=function(n){return function(t){return new Promise((function(e,r){(0,c.V_)(!0),o.Z.get("v1/contact/".concat(n)).then((function(n){var r=n.data;t((0,i.m4)(r)),e(r)})).catch(r).finally((function(){(0,c.V_)(!1)}))}))}}},7551:function(n,t,e){e.r(t),e.d(t,{default:function(){return C}});var r=e(1413),a=e(9439),o=e(2791),c=e(1938),i=e(2504),d=e(8735),u=e(3393),s=e(7718),l=e(2020),f=e(5048),p=e(5649),h=e(5304),v=e(80),m=e(3266),y=e(7770),b="LinkCard_iframeInput__91+Lu",x=e(4661),g=e(184),C=function(){var n=(0,l.$)().t,t=(0,o.useRef)(),e=(0,x.y)().goBack,C=(0,h.Qo)(),_=(0,o.useState)(!0),k=(0,a.Z)(_,2),w=k[0],j=k[1],Z=(0,h.CG)((function(n){return n.core.config.mode})),N=(0,h.CG)((function(n){return n.account.selectedAccount}),f.wU),V=(0,c.jC)("Input",{variant:"primary"}),E=(0,c.Fg)(),P={"--input-color":E.styles.global[":root"]["--input-color"],"--input-placeholderColor":E.styles.global[":root"]["--input-placeholderColor"]},S=(0,r.Z)((0,r.Z)((0,r.Z)({},P),V.field),{},{boxSizing:"border-box","::placeholder":{color:"var(--input-placeholderColor)"}}),T={boxShadow:V.field.boxShadow,border:"".concat(V.field.borderWidth,"px ").concat(V.field.borderColor," solid"),borderRadius:V.field.borderRadius,display:w?"none":""},O=(0,o.useMemo)((function(){return"string"===typeof V.field.height||"number"===typeof V.field.height?V.field.height:"48px"}),[V]),I=(0,o.useCallback)((function(){t.current=window.VGSCollect.create((0,v.Ab)(),"live"===Z?"live":"sandbox",(function(){j(!1)})),t.current.field("#card-number",{type:"card-number",name:"debitCard.cardNumber",placeholder:"**** **** **** ****",showCardIcon:!1,validations:["required","validCardNumberExtended"],css:S}),t.current.field("#card-expiration-date",{type:"card-expiration-date",name:"debitCard",placeholder:"MM / YYYY",yearLength:"4",serializers:[{name:"separate",options:{monthName:"expiryMonth",yearName:"expiryYear"}}],validations:["required","validCardExpirationDate"],css:S})}),[]);(0,o.useEffect)((function(){var n=document.createElement("script");return n.id="vgs-collect-script",n.crossOrigin="anonymous",n.src="https://js.verygoodvault.com/vgs-collect/2.11.0/vgs-collect.js",n.type="text/javascript",n.onload=I,document.head.append(n),function(){var n;window.VGSShow=void 0,null===(n=document.getElementById("vgs-collect-script"))||void 0===n||n.remove()}}),[]);var A=(0,o.useCallback)((function(){(0,v.V_)(!0);var n=t.current.state["debitCard.cardNumber"],a=t.current.state.debitCard;n.isValid&&a.isValid?N&&C((0,m.Ay)()).then((function(n){C((0,y.rE)({accountId:null===N||void 0===N?void 0:N.id,name:"".concat(n.firstName," ").concat(n.lastName),phone:n.phone,email:n.email,card:{address:n.address?(0,r.Z)((0,r.Z)({},n.address),{},{addressType:"card"}):void 0}})).then((function(a){a.id&&C((0,y.r5)(a.id)).then((function(o){var c=o.debitCardToken;t.current.submit("/v1/contact/".concat(a.id,"/debitcard"),{headers:{"sd-debitcard-token":c},method:"PATCH",mapDotToObject:"merge",data:{debitCard:{address:(0,r.Z)((0,r.Z)({},n.address),{},{addressType:""})}}},(function(n,t){(0,v.V_)(!1),200!==n?(400===n&&"expiry year"===t.sysMessage?(0,v.c0)("An error occurred.","Invalid expiry date","error"):(0,v.c0)("An error occurred.",t.message,"error"),a.id&&C((0,y.GK)(a.id)).catch(v.WH)):e()}),(function(){(0,v.V_)(!1),a.id&&C((0,y.GK)(a.id)).catch(v.WH),(0,v.c0)("An error occurred.","Something went wrong","error")}))}))})).catch(v.WH)})).catch(v.WH):((0,v.V_)(!1),(0,v.c0)("An error occurred.","Invalid card details","error"))}),[N]);return(0,g.jsx)("div",{className:"page",children:(0,g.jsx)(p.Z,{heading:n("link_card.title"),footer:(0,g.jsx)(i.zx,{width:"100%",variant:"primary",onClick:A,children:n("link_card.ctaText")}),children:(0,g.jsxs)(d.xu,{width:"100%",paddingTop:"15px",children:[(0,g.jsxs)(u.NI,{variant:"primary",children:[(0,g.jsx)(u.lX,{variant:"primary",children:n("link_card.card")}),w&&(0,g.jsx)(s.Od,{w:"100%",h:O}),(0,g.jsx)(d.xu,{h:O,className:b,style:T,id:"card-number"})]}),(0,g.jsxs)(u.NI,{variant:"primary",children:[(0,g.jsx)(u.lX,{variant:"primary",children:n("link_card.expiry")}),w&&(0,g.jsx)(s.Od,{w:"100%",h:O}),(0,g.jsx)(d.xu,{h:O,className:b,style:T,id:"card-expiration-date"})]})]})})})}},7718:function(n,t,e){e.d(t,{Od:function(){return p}});var r=e(1938),a=e(6831),o=e(2791);e(5866);a.jU?o.useLayoutEffect:o.useEffect;a.Ts;a.Ts;var c=e(2554),i=e(5223);function d(){return d=Object.assign?Object.assign.bind():function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},d.apply(this,arguments)}function u(n,t){if(null==n)return{};var e,r,a={},o=Object.keys(n);for(r=0;r<o.length;r++)e=o[r],t.indexOf(e)>=0||(a[e]=n[e]);return a}var s=["startColor","endColor","isLoaded","fadeDuration","speed","className"],l=(0,r.m$)("div",{baseStyle:{boxShadow:"none",backgroundClip:"padding-box",cursor:"default",color:"transparent",pointerEvents:"none",userSelect:"none","&::before, &::after, *":{visibility:"hidden"}}}),f=(0,c.F4)({from:{opacity:0},to:{opacity:1}}),p=(0,r.Gp)((function(n,t){var e=(0,r.mq)("Skeleton",n),c=function(){var n=o.useRef(!0);return o.useEffect((function(){n.current=!1}),[]),n.current}(),p=(0,r.Lr)(n);p.startColor,p.endColor;var h=p.isLoaded,v=p.fadeDuration;p.speed;var m=p.className,y=u(p,s),b=(0,i.D9)(h),x=(0,a.cx)("chakra-skeleton",m);if(h){var g=c||b?"none":f+" "+v+"s";return o.createElement(r.m$.div,d({ref:t,className:x,__css:{animation:g}},y))}return o.createElement(l,d({ref:t,className:x},y,{__css:e}))}));p.defaultProps={fadeDuration:.4,speed:.8},a.Ts&&(p.displayName="Skeleton");a.Ts;a.Ts}}]);
//# sourceMappingURL=7551.e2bf5f2b.chunk.js.map