"use strict";(self.webpackChunkdrop_in_ui=self.webpackChunkdrop_in_ui||[]).push([[6156],{5744:function(n,e,t){t(2791);var r=t(5798),a=t(184);e.Z=function(n){var e=n.value,t=n.placeholder,i=n.onChange;return(0,a.jsx)(r.II,{type:"number",variant:"primary",value:e,"data-testid":"percentage-input",placeholder:t,onChange:function(n){if(!n.target.value.startsWith("0")){var e=parseInt(n.target.value);if(!(e>100)){var t=!Number.isNaN(e)&&e>25;i(e,t)}}}})}},5808:function(n,e,t){t.d(e,{$N:function(){return o},Ny:function(){return i},T8:function(){return s},Z2:function(){return a}});var r=t(3152),a=function(n){return{type:r.km,payload:n}},i=function(n){return{type:r.z0,payload:n}},s=function(n){return{type:r.KY,payload:n}},o=function(n){return{type:r.fY,payload:n}}},9270:function(n,e,t){t.d(e,{Am:function(){return u},NB:function(){return c},RG:function(){return d},XD:function(){return h},gb:function(){return p},lM:function(){return l},mi:function(){return o},vd:function(){return f},zL:function(){return s}});var r=t(80),a=t(286),i=t(5808),s=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(t){return new Promise((function(s,o){(0,r.V_)(!0);var u="v1/business?include=accounts&limit=".concat(n,"&offset=").concat(e);a.Z.get(u).then((function(n){var e=n.data;t((0,i.Z2)(e.data)),s(e)})).catch((function(n){n.response&&n.response.data?o(n.response.data):o(n)})).finally((function(){(0,r.V_)(!1)}))}))}},o=function(n){return function(e){return new Promise((function(t,s){(0,r.V_)(!0),a.Z.post("v1/business",n).then((function(n){var r=n.data;e((0,i.Ny)(r)),t(r)})).catch((function(n){n.response&&n.response.data?s(n.response.data):s(n)})).finally((function(){(0,r.V_)(!1)}))}))}},u=function(n,e){return function(t){return new Promise((function(s,o){(0,r.V_)(!0),a.Z.patch("v1/business/".concat(n),e).then((function(n){var e=n.data;t((0,i.Ny)(e)),s(e)})).catch((function(n){n.response&&n.response.data?o(n.response.data):o(n)})).finally((function(){(0,r.V_)(!1)}))}))}},c=function(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(){return new Promise((function(t,i){e&&(0,r.V_)(!0);var s="v1/business/".concat(n);a.Z.get(s).then((function(n){var e=n.data;t(e)})).catch((function(n){n.response&&n.response.data?i(n.response.data):i(n)})).finally((function(){e&&(0,r.V_)(!1)}))}))}},l=function(n){return function(e){return new Promise((function(t,s){(0,r.V_)(!0),a.Z.get("v1/owner?businessId=".concat(n)).then((function(n){var r=n.data;e((0,i.T8)(r.data)),t(r)})).catch((function(n){n.response&&n.response.data?s(n.response.data):s(n)})).finally((function(){(0,r.V_)(!1)}))}))}},p=function(n){return function(){return new Promise((function(e,t){(0,r.V_)(!0),a.Z.post("v1/business/".concat(n,"/kyb"),{businessId:n}).then((function(n){var t=n.data;e(t)})).catch((function(n){n.response&&n.response.data?t(n.response.data):t(n)})).finally((function(){(0,r.V_)(!1)}))}))}},d=function(n,e){return function(){return new Promise((function(t,i){(0,r.V_)(!0),a.Z.patch("v1/owner/".concat(n),e).then((function(n){var e=n.data;t(e)})).catch((function(n){n.response&&n.response.data?i(n.response.data):i(n)})).finally((function(){(0,r.V_)(!1)}))}))}},f=function(n){return function(){return new Promise((function(e,t){(0,r.V_)(!0),a.Z.post("v1/owner",n).then((function(n){var t=n.data;e(t)})).catch((function(n){n.response&&n.response.data?t(n.response.data):t(n)})).finally((function(){(0,r.V_)(!1)}))}))}},h=function(n){return function(){return new Promise((function(e,t){(0,r.V_)(!0),a.Z.post("v1/owner/".concat(n,"/kyc")).then((function(n){var t=n.data;e(t)})).catch((function(n){n.response&&n.response.data?t(n.response.data):t(n)})).finally((function(){(0,r.V_)(!1)}))}))}}},6156:function(n,e,t){t.r(e);var r=t(9439),a=t(2791),i=t(2020),s=t(1938),o=t(8735),u=t(2504),c=t(3393),l=t(5048),p=t(7689),d=t(5649),f=t(5304),h=t(9270),m=t(80),v=t(5744),y=t(184);e.default=function(){var n=(0,i.$)().t,e=(0,p.s0)(),t=(0,f.Qo)(),N=(0,s.mq)("FormControl",{variant:"primary"}),b=(0,f.CG)((function(n){return n.business}),l.wU),_=b.selectedBusinessOwner,g=b.selectedBusiness,w=(0,a.useState)(null!==_&&void 0!==_&&_.ownership?parseInt(null===_||void 0===_?void 0:_.ownership,10):""),I=(0,r.Z)(w,2),x=I[0],E=I[1],j=(0,a.useMemo)((function(){return!Number.isNaN(x)&&x>=25&&x<=100}),[x]),V=(0,a.useCallback)((function(n){t((0,h.XD)(n)).then((function(){e("/ao/kyb/ownersList")})).catch(m.WH)}),[]),T=(0,a.useCallback)((function(){null!==_&&void 0!==_&&_.id&&_.person.address?t((0,h.RG)(null===_||void 0===_?void 0:_.id,{ownership:"".concat(x),person:{firstName:_.person.firstName,lastName:_.person.lastName,email:_.person.email,dateOfBirth:_.person.dateOfBirth,phone:_.person.phone,idNumber:_.person.idNumber.replaceAll("-",""),idType:_.person.idType,address:_.person.address}})).then((function(){setTimeout((function(){V(_.id)}),0)})).catch(m.WH):_&&g&&_.person.address&&t((0,h.vd)({businessId:g.id,ownership:"".concat(x),person:{firstName:_.person.firstName,lastName:_.person.lastName,email:_.person.email,dateOfBirth:_.person.dateOfBirth,phone:_.person.phone,idNumber:_.person.idNumber.replaceAll("-",""),idType:_.person.idType,address:_.person.address}})).then((function(n){var e=n.id;setTimeout((function(){V(e)}),0)})).catch(m.WH)}),[_,x]);return(0,y.jsx)("div",{className:"page",children:(0,y.jsx)("form",{onSubmit:function(n){n.preventDefault(),T()},children:(0,y.jsx)(d.Z,{varient:"box",heading:n("their_ownership.title"),footer:(0,y.jsxs)(o.xu,{children:[(0,y.jsx)(o.xv,{variant:"small",pb:"16px",children:n("their_ownership.toHelp")}),(0,y.jsx)(u.zx,{"data-testid":"submit-btn",width:"100%",variant:"primary",disabled:!j,type:"submit",children:n("their_ownership.ctaText")})]}),children:(0,y.jsx)(o.xu,{width:"100%",children:(0,y.jsxs)(c.NI,{variant:"primary",style:N,children:[(0,y.jsx)(c.lX,{variant:"primary",children:n("their_ownership.enterTheirOwnership")}),(0,y.jsx)(v.Z,{placeholder:n("their_ownership.percentageValue"),value:x,onChange:E})]})})})})})}},5798:function(n,e,t){t.d(e,{II:function(){return p}});var r=t(3393),a=t(1938),i=t(6831),s=t(2791),o=t(9611);function u(){return u=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},u.apply(this,arguments)}function c(n,e){if(null==n)return{};var t,r,a={},i=Object.keys(n);for(r=0;r<i.length;r++)t=i[r],e.indexOf(t)>=0||(a[t]=n[t]);return a}var l=["htmlSize"],p=(0,a.Gp)((function(n,e){var t=n.htmlSize,o=c(n,l),p=(0,a.jC)("Input",o),d=(0,a.Lr)(o),f=(0,r.Yp)(d),h=(0,i.cx)("chakra-input",n.className);return s.createElement(a.m$.input,u({size:t},f,{__css:p.field,ref:e,className:h}))}));i.Ts&&(p.displayName="Input"),p.id="Input";var d=["children","className"],f=(0,a.eC)("InputGroup"),h=f[0],m=f[1],v=(0,a.Gp)((function(n,e){var t=(0,a.jC)("Input",n),r=(0,a.Lr)(n),l=r.children,p=r.className,f=c(r,d),m=(0,i.cx)("chakra-input__group",p),v={},y=(0,o.WR)(l),N=t.field;y.forEach((function(n){if(t){var e,r;if(N&&"InputLeftElement"===n.type.id)v.paddingStart=null!=(e=N.height)?e:N.h;if(N&&"InputRightElement"===n.type.id)v.paddingEnd=null!=(r=N.height)?r:N.h;"InputRightAddon"===n.type.id&&(v.borderEndRadius=0),"InputLeftAddon"===n.type.id&&(v.borderStartRadius=0)}}));var b=y.map((function(e){var t,r,a=(0,i.YU)({size:(null==(t=e.props)?void 0:t.size)||n.size,variant:(null==(r=e.props)?void 0:r.variant)||n.variant});return"Input"!==e.type.id?s.cloneElement(e,a):s.cloneElement(e,Object.assign(a,v,e.props))}));return s.createElement(a.m$.div,u({className:m,ref:e,__css:{width:"100%",display:"flex",position:"relative"}},f),s.createElement(h,{value:t},b))}));i.Ts&&(v.displayName="InputGroup");var y=["placement"],N={left:{marginEnd:"-1px",borderEndRadius:0,borderEndColor:"transparent"},right:{marginStart:"-1px",borderStartRadius:0,borderStartColor:"transparent"}},b=(0,a.m$)("div",{baseStyle:{flex:"0 0 auto",width:"auto",display:"flex",alignItems:"center",whiteSpace:"nowrap"}}),_=(0,a.Gp)((function(n,e){var t,r=n.placement,a=void 0===r?"left":r,i=c(n,y),o=null!=(t=N[a])?t:{},l=m();return s.createElement(b,u({ref:e},i,{__css:u({},l.addon,o)}))}));i.Ts&&(_.displayName="InputAddon");var g=(0,a.Gp)((function(n,e){return s.createElement(_,u({ref:e,placement:"left"},n,{className:(0,i.cx)("chakra-input__left-addon",n.className)}))}));i.Ts&&(g.displayName="InputLeftAddon"),g.id="InputLeftAddon";var w=(0,a.Gp)((function(n,e){return s.createElement(_,u({ref:e,placement:"right"},n,{className:(0,i.cx)("chakra-input__right-addon",n.className)}))}));i.Ts&&(w.displayName="InputRightAddon"),w.id="InputRightAddon";var I=["placement"],x=["className"],E=["className"],j=(0,a.m$)("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),V=(0,a.Gp)((function(n,e){var t,r,a,i=n.placement,o=void 0===i?"left":i,l=c(n,I),p=m(),d=p.field,f=u(((a={})["left"===o?"insetStart":"insetEnd"]="0",a.width=null!=(t=null==d?void 0:d.height)?t:null==d?void 0:d.h,a.height=null!=(r=null==d?void 0:d.height)?r:null==d?void 0:d.h,a.fontSize=null==d?void 0:d.fontSize,a),p.element);return s.createElement(j,u({ref:e,__css:f},l))}));V.id="InputElement",i.Ts&&(V.displayName="InputElement");var T=(0,a.Gp)((function(n,e){var t=n.className,r=c(n,x),a=(0,i.cx)("chakra-input__left-element",t);return s.createElement(V,u({ref:e,placement:"left",className:a},r))}));T.id="InputLeftElement",i.Ts&&(T.displayName="InputLeftElement");var k=(0,a.Gp)((function(n,e){var t=n.className,r=c(n,E),a=(0,i.cx)("chakra-input__right-element",t);return s.createElement(V,u({ref:e,placement:"right",className:a},r))}));k.id="InputRightElement",i.Ts&&(k.displayName="InputRightElement")}}]);
//# sourceMappingURL=6156.c0df86b1.chunk.js.map