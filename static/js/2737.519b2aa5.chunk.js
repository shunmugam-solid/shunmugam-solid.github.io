"use strict";(self.webpackChunkdrop_in_ui=self.webpackChunkdrop_in_ui||[]).push([[2737],{5919:function(e,n,r){r.d(n,{Z:function(){return g}});var i=r(1413),l=r(9439),a=r(2791),d=r(5568),t=r(5048),s=r(9916),o=r(5798),c=r(5304),u=function(e,n){return e.find((function(e){return e.types.includes(n)}))},v=r(184),g=function(e){var n=e.address,r=e.onChange,g=e.googleApiKey,p=e.placeholder,y=e.restrictedCountry,h=e.international,f=(0,a.useState)((0,i.Z)({},n)),_=(0,l.Z)(f,2),m=_[0],b=_[1],x=(0,a.useState)((null===n||void 0===n?void 0:n.line1)||""),A=(0,l.Z)(x,2),C=A[0],j=A[1],Z=(0,a.useRef)(null),I=(0,c.CG)((function(e){return e.user.personDetails}),t.wU),S=(0,a.useMemo)((function(){if(y)return y;if(null!==I&&void 0!==I&&I.phone)try{var e=(0,s.SR)(null===I||void 0===I?void 0:I.phone);return(null===e||void 0===e?void 0:e.country)||"US"}catch(n){return"US"}return"US"}),[I,y]);(0,a.useEffect)((function(){window.gm_authFailure=function(){return Z.current.disabled=!1,Z.current.placeholder="",Z.current.style.backgroundImage="",Z.current.focus(),!1}}),[]),(0,a.useEffect)((function(){n&&(b(n),j(n.line1))}),[n]);return(0,v.jsx)(o.II,{variant:"primary","data-testid":"address-line1",as:d.default,ref:Z,apiKey:g,onPlaceSelected:function(e){if(e){var n=function(e){var n=e.address_components,r=e.geometry,i={},l=n,a=u(l,"premise"),d=u(l,"street_number"),t=u(l,"route"),s=u(l,"locality"),o=u(l,"sublocality_level_1"),c=u(l,"postal_town"),v=u(l,"administrative_area_level_1"),g=u(l,"country"),p=u(l,"postal_code"),y=[d,a,t];return s||(s=c||o),i.line1=y.filter((function(e){return e})).map((function(e){return e.long_name})).join(" "),i.line2=null,i.city=s?s.long_name:null,i.postalCode=p?p.long_name:null,i.state=v?v.short_name:null,i.country=g?g.short_name:null,i.latitude=r.location.lat,i.longitude=r.location.lng,i}(e),l=n.line1,a=n.line2,d=n.city,t=n.state,s=n.postalCode,o=n.country,c=(0,i.Z)((0,i.Z)({},m),{},{line1:l,line2:a,city:d,state:t,country:o,postalCode:s});b(c),r(c),j(l)}},value:C,placeholder:p||"",onChange:function(e){j(e.target.value);var n=(0,i.Z)((0,i.Z)({},m),{},{line1:e.target.value});h||(n.country=S),r(n)},options:{types:["address"],componentRestrictions:h?void 0:{country:S}}})}},2252:function(e,n,r){r.r(n);var i=r(4942),l=r(1413),a=r(9439),d=r(2791),t=r(1938),s=r(2504),o=r(8735),c=r(9743),u=r(3393),v=r(5798),g=r(2020),p=r(5048),y=r(5425),h=r(5919),f=r(5304),_=r(80),m=r(3746),b=r(7208),x=r(4661),A=r(184),C=d.lazy((function(){return r.e(1330).then(r.bind(r,2637))})),j=d.lazy((function(){return Promise.all([r.e(7625),r.e(3054)]).then(r.bind(r,3054))}));n.default=function(){var e,n,r,Z,I=(0,g.$)().t,S=(0,f.Qo)(),k=(0,x.y)(),w=k.open,N=k.goBack,U=(0,t.mq)("FormControl",{variant:"primary"}),T=(0,d.useState)(!0),X=(0,a.Z)(T,2),z=X[0],B=X[1],D=(0,f.CG)((function(e){return e.card.cardPayload}),p.wU),H=(0,f.CG)((function(e){return e.card.replaceCardId})),F=(0,d.useCallback)((function(e,n){if(D){var r=(0,l.Z)((0,l.Z)({},D),{},(0,i.Z)({},e,n));S((0,m.Qr)(r))}}),[D]),G=(0,d.useMemo)((function(){return D&&!!D.billingAddress&&!!D.billingAddress.line1&&!!D.billingAddress.city&&!!D.billingAddress.state&&!!D.billingAddress.country&&!!D.billingAddress.postalCode&&0!==D.billingAddress.line1.length&&0!==D.billingAddress.city.length&&0!==D.billingAddress.state.length&&0!==D.billingAddress.country.length&&0!==D.billingAddress.postalCode.length}),[D]),K=(0,d.useCallback)((function(){G&&D&&(z?(D.shipping={shippingAddress:D.billingAddress},S((0,b.LH)(D)).then((function(){H?S((0,b.XN)(H)).catch(_.WH).finally((function(){w(j)})):w(j)})).catch(_.WH)):w(C))}),[G,H,z,D]);return(0,A.jsx)("div",{className:"page",children:(0,A.jsx)("form",{onSubmit:function(e){e.preventDefault(),K()},children:(0,A.jsx)(y.Z,{heading:I("create_card_info.title_".concat(null===D||void 0===D?void 0:D.cardType)),onBack:N,footer:(0,A.jsx)(s.zx,{width:"100%",variant:"primary",disabled:!G,onClick:K,children:I("create_card_address.ctaText")}),children:(0,A.jsxs)(o.xu,{width:"100%",children:["physical"===(null===D||void 0===D?void 0:D.cardType)?(0,A.jsxs)(o.kC,{alignItems:"center",justifyContent:"space-between",children:[(0,A.jsxs)(o.xu,{children:[(0,A.jsx)(o.xv,{variant:"large",textAlign:"left",children:I("create_card_address.confirmBillingAddressTitle")}),(0,A.jsx)(o.xv,{variant:"regular",className:"text-light",textAlign:"left",children:I("create_card_address.confirmBillingAddressDesc")})]}),(0,A.jsx)(c.r,{variant:"primary",defaultChecked:z,onChange:function(){B(!z)}})]}):null,(0,A.jsx)(o.xv,{variant:"large",mt:3,children:I("create_card_address.confirmMailingAddress")}),(0,A.jsxs)(u.NI,{variant:"primary",style:U,children:[(0,A.jsx)(u.lX,{variant:"primary",children:I("create_card_address.address1")}),(0,A.jsx)(h.Z,{placeholder:I("create_card_address.address1"),googleApiKey:"AIzaSyDcW61NFxklslLuuUxNw0SzoBmHyC4Zhh4",address:(null===D||void 0===D?void 0:D.billingAddress)||void 0,restrictedCountry:"physical"===(null===D||void 0===D?void 0:D.cardType)?"US":void 0,onChange:function(e){F("billingAddress",(0,l.Z)((0,l.Z)({},e),{},{addressType:"mailing"}))}})]}),(0,A.jsxs)(u.NI,{variant:"primary",style:U,children:[(0,A.jsx)(u.lX,{variant:"primary",children:I("create_card_address.address2")}),(0,A.jsx)(v.II,{variant:"primary",placeholder:I("create_card_address.address2"),value:null===D||void 0===D||null===(e=D.billingAddress)||void 0===e?void 0:e.line2,onChange:function(e){F("billingAddress",(0,l.Z)((0,l.Z)({},(null===D||void 0===D?void 0:D.billingAddress)||{}),{},{line2:e.target.value}))}})]}),(0,A.jsxs)(u.NI,{variant:"primary",style:U,children:[(0,A.jsx)(u.lX,{variant:"primary",children:I("create_card_address.addressCity")}),(0,A.jsx)(v.II,{variant:"primary",placeholder:I("create_card_address.addressCity"),value:null===D||void 0===D||null===(n=D.billingAddress)||void 0===n?void 0:n.city,onChange:function(e){F("billingAddress",(0,l.Z)((0,l.Z)({},(null===D||void 0===D?void 0:D.billingAddress)||{}),{},{city:e.target.value}))}})]}),(0,A.jsxs)(u.NI,{variant:"primary",style:U,children:[(0,A.jsx)(u.lX,{variant:"primary",children:I("create_card_address.addressState")}),(0,A.jsx)(v.II,{variant:"primary",placeholder:I("create_card_address.addressState"),value:null===D||void 0===D||null===(r=D.billingAddress)||void 0===r?void 0:r.state,onChange:function(e){F("billingAddress",(0,l.Z)((0,l.Z)({},(null===D||void 0===D?void 0:D.billingAddress)||{}),{},{state:e.target.value}))}})]}),(0,A.jsxs)(u.NI,{variant:"primary",style:U,children:[(0,A.jsx)(u.lX,{variant:"primary",children:I("create_card_address.addressZipcode")}),(0,A.jsx)(v.II,{variant:"primary",placeholder:I("create_card_address.addressZipcode"),value:null===D||void 0===D||null===(Z=D.billingAddress)||void 0===Z?void 0:Z.postalCode,onChange:function(e){F("billingAddress",(0,l.Z)((0,l.Z)({},(null===D||void 0===D?void 0:D.billingAddress)||{}),{},{postalCode:e.target.value}))}})]})]})})})})}}}]);
//# sourceMappingURL=2737.519b2aa5.chunk.js.map