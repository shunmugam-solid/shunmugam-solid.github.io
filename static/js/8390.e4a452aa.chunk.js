"use strict";(self.webpackChunkdrop_in_ui=self.webpackChunkdrop_in_ui||[]).push([[8390],{7427:function(t,n,a){a.d(n,{a:function(){return l},f:function(){return c}});var e=a(9831),i=a(1951),s=a(80),r=a(286),o=a(7514),c=function(t,n,a,c,l,d,u){return function(x,h){return new Promise((function(m,p){var _="cash"===n?"v1/account/".concat(t,"/transaction?limit=").concat(a,"&offset=").concat(c):"v1/crypto/".concat(t,"/transaction?limit=").concat(a,"&offset=").concat(c);if(u&&(_+="&export=".concat(u)),l&&l.length>0&&(_+="&query=".concat(encodeURIComponent(l))),d){var f=d;Object.keys(d).forEach((function(t){f[t]&&(_+="crypto"===n&&"startDate"===t?"&startTime=".concat(f[t]):"crypto"===n&&"endDate"===t?"&endTime=".concat(f[t]):"&".concat(t,"=").concat(f[t]))}))}setTimeout((function(){"pdf"===u?(0,s.V_)(!0):x((0,o.Rn)(!0))}),0),r.Z.get(_,{responseType:"pdf"===u?"blob":"json"}).then((function(t){var n=t.data;if("pdf"!==u){var a=h().transaction.txnList,s=h().transaction.transactions;0===c&&(a={},s=[]),n.data.forEach((function(t){var n=(0,e.default)(t.txnDate),r=(0,i.default)(n,"MMMM yyyy");a[r]?a[r].push(t):a[r]=[t],s.push(t)})),x((0,o.XI)({transactions:s,txnList:a,total:n.total}))}m(n)})).catch(p).finally((function(){"pdf"===u?(0,s.V_)(!1):x((0,o.Rn)(!1))}))}))}},l=function(t,n,a){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"json";return function(i){return new Promise((function(c,l){(0,s.V_)(!0);var d="crypto"===n?"v1/crypto/".concat(t,"/transaction/").concat(a):"v1/account/".concat(t,"/transaction/").concat(a,"?export=").concat(e);r.Z.get(d,{responseType:"pdf"===e?"blob":"json"}).then((function(t){var n=t.data;"pdf"!==e&&i((0,o.IR)(n)),c(n)})).catch((function(t){t.response&&t.response.data?l(t.response.data):l(t)})).finally((function(){(0,s.V_)(!1)}))}))}}},6903:function(t,n,a){a.r(n),a.d(n,{default:function(){return y}});var e=a(2791),i=a(5223),s=a(8735),r=a(5048),o=a(2020),c=a(7689),l=a(5304),d=a(80),u=a(4144),x=a(680),h=a(9336),m=a(2559),p="Dashboard_hideItInMobile__6wcqm",_="Dashboard_showItInMobile__BlcTM",f="Dashboard_accountLabel__BRzeD",v=a(4661),g=a(184),j=e.lazy((function(){return a.e(5772).then(a.bind(a,5756))})),b=e.lazy((function(){return Promise.all([a.e(9259),a.e(1149)]).then(a.bind(a,8421))})),y=function(){var t=(0,o.$)().t,n=(0,v.y)().open,a=(0,c.s0)(),y=(0,l.CG)((function(t){return t.user.personDetails}),r.wU),w=(0,l.CG)((function(t){return t.account}),r.wU),C=w.selectedAccount,T=w.selectedAccountType,A=(0,l.CG)((function(t){return t.business.selectedBusiness}),r.wU),k=(0,i.VP)((null===C||void 0===C?void 0:C.accountNumber)||"",2e3),D=k.hasCopied,N=k.onCopy,S=(0,e.useRef)(null),L=(0,e.useMemo)((function(){return A?A.legalName:"".concat(null===y||void 0===y?void 0:y.firstName," ").concat(null===y||void 0===y?void 0:y.lastName)}),[y,A]),z=(0,e.useCallback)((function(){n(j)}),[]),M=(0,e.useCallback)((function(){n(b,{id:null===A||void 0===A?void 0:A.id})}),[A]),Z=(0,e.useCallback)((function(){a("/fund")}),[]),V=(0,e.useCallback)((function(){a("/contacts")}),[]);return(0,g.jsxs)("div",{className:"page",id:"dashboard-page",children:[(0,g.jsx)(s.xu,{mb:"24px",children:(0,g.jsxs)(s.kC,{children:[(0,g.jsx)(s.xv,{"data-testid":"heading",variant:"large",mr:"auto",children:L}),A&&"personChecking"!==A.id?(0,g.jsx)(s.xv,{variant:"small",cursor:"pointer",className:"text-light",onClick:M,children:"View Details"}):null]})}),(0,g.jsx)(s.xu,{mb:"24px",children:(0,g.jsxs)(s.kC,{gap:"24px",flexWrap:{base:"wrap",md:"nowrap"},children:[(0,g.jsxs)(s.xu,{width:{base:"100%",md:"cardAccount"!==(null===C||void 0===C?void 0:C.type)?"50%":"100%"},borderRadius:"4px",backgroundColor:"var(--dashboard-card-background-color)",color:"var(--dashboard-card-text-color)",padding:"24px",children:[(0,g.jsxs)(s.kC,{mb:"12px",justifyContent:"space-between",children:[(0,g.jsx)(s.xv,{className:f,lineHeight:"24px",fontSize:"20px",children:null===C||void 0===C?void 0:C.label}),(0,g.jsx)(s.xv,{cursor:"pointer",fontSize:"14px",textDecoration:"underline",onClick:z,className:p,children:"View Details"}),(0,g.jsx)(s.xv,{display:"none",fontWeight:"bold",textAlign:"left",mb:"8px",fontSize:"14px",className:_,children:C?(0,d.OH)(C.availableBalance,C.currency):null})]}),(0,g.jsx)(s.xv,{fontWeight:"bold",textAlign:"left",mb:"34px",fontSize:"30px",className:p,children:C?(0,d.OH)(C.availableBalance,C.currency):null}),(0,g.jsxs)(s.kC,{justify:"space-between",children:[(0,g.jsxs)(s.kC,{gap:"21px",alignItems:"center",children:[(0,g.jsxs)(s.xv,{color:"var(--dashboard-card-text-color)",variant:"regular",children:[t("dashboard.dashboard_accNo_title")," ",null===C||void 0===C?void 0:C.accountNumber]}),D?(0,g.jsx)(u.Z,{icon:"tick",cursor:"pointer",size:12}):(0,g.jsx)(u.Z,{onClick:N,icon:"copy",cursor:"pointer",size:12})]}),(0,g.jsx)(s.xv,{display:"none",cursor:"pointer",fontSize:"14px",textDecoration:"underline",color:"var(--dashboard-card-text-color)",onClick:z,className:_,children:"View Details"})]})]}),"cardAccount"!==(null===C||void 0===C?void 0:C.type)?(0,g.jsxs)(s.gC,{width:{base:"100%",md:"50%"},children:[(0,g.jsx)(s.xu,{cursor:"pointer",width:"100%",padding:"16px 24px 16px 16px",backgroundColor:"var(--list-item-background)",onClick:Z,children:(0,g.jsxs)(s.Ug,{justifyContent:"space-between",children:[(0,g.jsxs)("div",{className:"details",children:[(0,g.jsx)(s.xv,{fontSize:"20px",lineHeight:"24px",paddingBottom:"12px",variant:"regular",textAlign:"left",children:t("dashboard.dashboard_row_fund_title")}),(0,g.jsx)(s.xv,{variant:"small",textAlign:"left",children:t("dashboard.dashboard_row_fund_desc",{value:null===C||void 0===C?void 0:C.label})})]}),(0,g.jsx)(u.Z,{style:{marginLeft:"8px"},icon:"Arrow-small-right",size:12,className:"svg-light-grey-1"})]})}),(0,g.jsx)(s.xu,{cursor:"pointer",width:"100%",padding:"16px 24px 16px 16px",backgroundColor:"var(--list-item-background)",onClick:V,children:(0,g.jsxs)(s.Ug,{justifyContent:"space-between",children:[(0,g.jsxs)("div",{className:"details",children:[(0,g.jsx)(s.xv,{fontSize:"20px",lineHeight:"24px",paddingBottom:"12px",variant:"regular",textAlign:"left",children:t("dashboard.dashboard_row_pay_title")}),(0,g.jsx)(s.xv,{variant:"small",textAlign:"left",children:t("dashboard.dashboard_row_pay_desc",{value:null===C||void 0===C?void 0:C.label})})]}),(0,g.jsx)(u.Z,{style:{marginLeft:"8px"},icon:"Arrow-small-right",size:12,className:"svg-light-grey-1"})]})})]}):null]})}),(0,g.jsx)(s.xu,{children:(0,g.jsx)(x.Z,{showSearch:!1,showAdd:!1,showEmptyState:!1,showCompactView:!0,pagination:!1,contactsPerView:10,showBack:!1})}),(0,g.jsx)(s.xu,{mt:"24px",mb:"24px",children:(0,g.jsx)(h.Z,{accountType:T,filterRequest:void 0,showFilter:!1,showExport:!1,showMonth:!1,showSearch:!1,showCompactView:!0,transactionsPerView:20,dateFormat:"MMM d, yyyy 'at' h:mm aa"})}),(0,g.jsx)(s.xu,{children:(0,g.jsx)(m.Z,{ref:S,showSearch:!1,showAddCard:!0,cardsPerView:20,pagination:!1,showExtendedDetails:!1,showCompactView:!0})})]})}},9336:function(t,n,a){a.d(n,{Z:function(){return D}});var e=a(1413),i=a(9439),s=a(2791),r=a(2020),o=a(8735),c=a(5798),l=a(6450),d=a(5048),u=a(4771),x=a(1951),h=a(7689),m=a(4144),p={bodyStyles:"TransactionsList_bodyStyles__DV1tn",transaction__box:"TransactionsList_transaction__box__rlmOM",scrollableDiv:"TransactionsList_scrollableDiv__lUBu3",transactions__search:"TransactionsList_transactions__search__X7iW3",transactions__search__icon:"TransactionsList_transactions__search__icon__rJTxm",transactions__search__input:"TransactionsList_transactions__search__input__YC3Vr",transactions__filter:"TransactionsList_transactions__filter__U5l+w",transactions__list_month:"TransactionsList_transactions__list_month__7mtUP",transactions__month_header:"TransactionsList_transactions__month_header__6369R",transactions__list_item:"TransactionsList_transactions__list_item__elp8k",tag:"TransactionsList_tag__vt8SQ",tag__intrabank:"TransactionsList_tag__intrabank__rkOgY",tag__card:"TransactionsList_tag__card__I1gKw",transaction__description:"TransactionsList_transaction__description__XrkJ8",transaction__received:"TransactionsList_transaction__received__k9ILX",transaction__sent:"TransactionsList_transaction__sent__HFnJf"},_=a(5304),f=a(729),v=a(80),g=a(6559),j=a(1605),b=a(7427),y=a(7514),w=a(4661),C=a(3692),T=a(184),A=s.lazy((function(){return Promise.all([a.e(4398),a.e(4044),a.e(5326),a.e(8148)]).then(a.bind(a,219))})),k=s.memo((function(t){var n,e=t.transactionData,i=t.dateFormat,c=(0,r.$)().t,l=(0,w.y)().open,u=(0,_.CG)((function(t){return t.core.ui}),d.wU),h=(0,s.useMemo)((function(){return(0,x.default)(new Date(e.createdAt),i)}),[i,e.createdAt]),m=(0,s.useMemo)((function(){var t=e.walletId?e.amount:(0,v.OH)(e.amount);return parseFloat(e.amount)>0?"+".concat(t):t}),[e]),f=(0,s.useMemo)((function(){return"pending"===e.status?"#FFAC4A":"canceled"===e.status?"#FF4A4A":"".concat("debit"===e.txnType?"#FF4A4A":"#2EC193")}),[e]);return(0,T.jsxs)(o.HC,{backgroundColor:"var(--bg-white)","data-class":"transaction-list-item","data-testid":"transaction-item-".concat(e.id),onClick:function(){l(s.lazy((function(){return Promise.all([a.e(9259),a.e(714)]).then(a.bind(a,714))})),{id:e.id})},className:p.transactions__list_item,children:[(0,T.jsx)(o.xu,{className:"".concat(p.tag," ").concat(p["tag__".concat(e.transferType)]),children:(0,T.jsx)(o.xv,{textTransform:"capitalize",variant:"small",textAlign:"center",color:"inherit",textOverflow:"ellipsis",overflow:"hidden",children:c(["transactions_list.".concat(e.transferType),e.transferType||""])})}),(0,T.jsxs)(o.xu,{className:p.transaction__description,children:[(0,T.jsx)(o.xv,{variant:"regular",className:"text-dark",textAlign:"left",children:e.title}),(0,T.jsx)(o.xv,{variant:"small",className:"text-light",textAlign:"left",children:"pending"===e.status?"Pending":h})]}),(0,T.jsx)(o.xv,{variant:"small",title:"".concat((0,v.OH)(e.amount)),textAlign:"right",fontWeight:null===(n=u.modules.transactions)||void 0===n?void 0:n.amountFontWeight,color:f,children:m})]})})),D=function(t){var n=t.showFilter,a=t.showExport,x=t.showMonth,D=t.showSearch,N=t.showCompactView,S=t.accountType,L=t.filterRequest,z=t.transactionsPerView,M=void 0===z?20:z,Z=t.dateFormat,V=(0,r.$)().t,U=(0,w.y)().open,P=(0,h.s0)(),O=(0,s.useState)(""),H=(0,i.Z)(O,2),I=H[0],R=H[1],F=(0,s.useState)(""),E=(0,i.Z)(F,2),G=E[0],B=E[1],J=(0,s.useRef)(0),W=(0,s.useRef)(!1),X=(0,_.Qo)(),q=(0,_.CG)((function(t){return t.transaction.transactionLoading}),d.wU),Y=(0,_.CG)((function(t){return t.transaction.transactions}),d.wU),$=(0,_.CG)((function(t){return t.transaction.txnList}),d.wU),Q=(0,_.CG)((function(t){return t.transaction.total}),d.wU),K=(0,_.CG)((function(t){return t.account.selectedAccount}),d.wU),tt=(0,_.CG)((function(t){return t.crypto.selectedAccount}),d.wU),nt=(0,_.CG)((function(t){return t.transaction.filters}),d.wU),at=Y.length,et=(0,s.useMemo)((function(){return(0,e.Z)((0,e.Z)({},nt.data),{},{timePeriod:nt.tmpStates.timePeriod})}),[nt]),it=J.current/M+1;(0,f.bX)((function(){J.current=0,B(I)}),1e3,[I]);var st=(0,s.useRef)(1),rt=(0,s.useCallback)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"json",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,e.Z)({},et),a="cash"===S&&K?K.id:"crypto"===S&&tt?tt.id:"";if(""!==a){var i=JSON.parse(JSON.stringify(n));L&&L.type&&L.id?"contact"===L.type?i.contactId=L.id:"card"===L.type&&(i.cardId=L.id):(i.contactId=void 0,i.cardId=void 0),"card"===i.txnType&&(i.txnType=void 0,i.transferType="card"),"0.00"!==i.maxAmount&&"0"!==i.maxAmount||delete i.maxAmount,X((0,b.f)(a,S,"pdf"===t?100:M,"pdf"===t?0:J.current,G,i,t)).then((function(n){if("pdf"===t){var a=window.URL.createObjectURL(n),e=document.createElement("a");e.href=a,e.download="statement.pdf",e.click(),e.remove()}})).catch(v.WH)}}),[K,G,J,M,et,L,st]);(0,s.useEffect)((function(){rt()}),[G,K]),(0,s.useEffect)((function(){return C.T.subscribe(C.z.TRANSACTION_REFRESH,(function(){J.current=0,rt()}))}),[et,rt]);var ot=(0,s.useCallback)((function(){P("/transactions")}),[]),ct=(0,s.useCallback)((function(t){var n=JSON.parse(JSON.stringify((0,e.Z)({},nt))),a=n.data,i=n.tmpStates;"txnType"===t?(a.txnType=void 0,a.transferType=void 0,i.transactionType=void 0):"amount"===t?(a.minAmount=void 0,a.maxAmount=void 0,i.amount={min:"",max:""}):"timePeriod"===t&&(a.startDate=void 0,a.endDate=void 0,i.startDate=void 0,i.endDate=void 0,i.timePeriod=void 0),X((0,y.L5)({data:a,tmpStates:i})),setTimeout((function(){rt("json",a)}),0)}),[nt]),lt=function(){return Object.keys($).map((function(t){return(0,T.jsxs)(o.xu,{"data-testid":"month-group-".concat(t.replace(/ /g,"_")),children:[x&&(0,T.jsx)(o.xv,{"data-testid":"month-name-text",variant:"large",className:p.transactions__month_header,children:t}),(0,T.jsx)(o.aV,{className:p.transactions__list_month,"data-class":"transaction-list",children:$[t].map((function(t){return(0,T.jsx)(k,{transactionData:t,dateFormat:Z},t.id)}))})]},"tr-".concat(t))}))},dt=(0,s.useMemo)((function(){return{credit:V("filter.credits"),debit:V("filter.debits"),card:V("filter.cardTransactions")}}),[]);return(0,T.jsx)(o.xu,{className:p.bodyStyles,children:q&&1===it&&!W.current?(0,T.jsx)(g.Z,{name:"TransactionListView",showHeader:!N}):(0,T.jsxs)(o.xu,{width:"100%",height:"100%",className:p.transaction__box,children:[(0,T.jsxs)("div",{children:[(0,T.jsxs)(o.Ug,{width:"100%",children:[(0,T.jsx)(o.xv,{"data-testid":"heading",variant:"large",mr:"auto",children:V("transactions_list.title")}),N&&0!==Q?(0,T.jsxs)(o.xv,{variant:"regular",className:"text-light",fontSize:"16px",cursor:"pointer",onClick:ot,children:[V("transactions_list.viewAll"),(0,T.jsx)(m.Z,{style:{marginLeft:"8px"},icon:"Arrow-small-right",size:12,className:"svg-light-grey-1"})]}):null,a?(0,T.jsxs)(o.Ug,{ml:"auto",cursor:"pointer",onClick:function(){return rt("pdf")},"data-testid":"export-icon",children:[(0,T.jsx)(m.Z,{icon:"icon-export",size:16}),(0,T.jsx)(o.xv,{variant:"regular",className:"transactions__export-title",children:V("transactions_list.exportTitle")}),(0,T.jsx)(m.Z,{icon:"Arrow-small-right",size:12,className:"svg-light-grey-1"})]}):null]}),(0,T.jsxs)(o.Ug,{my:D||n?"16px":"0px",children:[D?(0,T.jsxs)(o.xu,{className:p.transactions__search,children:[(0,T.jsx)(m.Z,{icon:"icon-search",className:p.transactions__search__icon,size:18}),(0,T.jsx)(c.II,{"data-testid":"search-input",placeholder:V("transactions_list.searchTransactions"),variant:"primary",className:p.transactions__search__input,value:I,onChange:function(t){W.current=!0,R(t.target.value)}})]}):null,n?(0,T.jsx)(o.M5,{className:"".concat(p.transactions__filter),"data-testid":"filter-handler",onClick:function(){U(A)},children:(0,T.jsx)(m.Z,{icon:"icon-filter",size:20})}):null]})]}),(0,T.jsxs)(o.Ug,{spacing:4,marginBottom:"16px",children:[et.txnType?(0,T.jsxs)(l.Vp,{variant:"primary",padding:"10px","data-testid":"filter-tag-txnType",children:[(0,T.jsx)(l.Sn,{fontSize:"12px",textTransform:"uppercase",children:dt[et.txnType]}),(0,T.jsx)(l.SD,{onClick:function(){ct&&ct("txnType")}})]}):null,et.minAmount&&"0.00"!==et.minAmount||et.maxAmount&&"0.00"!==et.maxAmount?(0,T.jsxs)(l.Vp,{variant:"primary",padding:"10px","data-testid":"filter-tag-amount",children:[(0,T.jsx)(l.Sn,{fontSize:"12px",textTransform:"uppercase",children:et.minAmount&&et.maxAmount&&"0.00"!==et.minAmount&&"0.00"!==et.maxAmount?"".concat((0,v.OH)(et.minAmount)," - ").concat((0,v.OH)(et.maxAmount)):et.minAmount&&"0.00"!==et.minAmount?(0,v.OH)(et.minAmount):"".concat((0,v.OH)("0.00")," - ").concat((0,v.OH)(et.maxAmount||""))}),(0,T.jsx)(l.SD,{onClick:function(){ct&&ct("amount")}})]}):null,et.timePeriod&&("custom"!==et.timePeriod||et.startDate&&""!==et.startDate||et.endDate&&""!==et.endDate)?(0,T.jsxs)(l.Vp,{variant:"primary",padding:"10px","data-testid":"filter-tag-time",children:[(0,T.jsx)(l.Sn,{fontSize:"12px",textTransform:"uppercase",children:"custom"===et.timePeriod?et.startDate&&et.endDate&&""!==et.startDate&&""!==et.endDate?"".concat(et.startDate," - ").concat(et.endDate):et.startDate&&""!==et.startDate?et.startDate:et.endDate:V("filter.".concat(et.timePeriod))}),(0,T.jsx)(l.SD,{onClick:function(){ct&&ct("timePeriod")}})]}):null]}),q&&W.current?(0,T.jsx)(g.Z,{name:"TransactionListView",showHeader:!1}):(0,T.jsx)("div",{style:{height:"100%",overflowY:"scroll"},className:p.scrollableDiv,id:"scrollableDiv",children:N?lt():(0,T.jsx)(u.Z,{scrollThreshold:.6,dataLength:at,next:function(){J.current=it*M,setTimeout((function(){console.log("call from infi"),rt()}),0)},hasMore:at<Q&&0!==Q,loader:(0,T.jsx)(o.M5,{my:3,children:(0,T.jsx)(j.Z,{showModal:!1,show:!0})}),endMessage:q?null:(0,T.jsxs)(T.Fragment,{children:[0!==Q?(0,T.jsx)(o.iz,{className:"no_transaction"}):null,(0,T.jsx)(o.M5,{py:2,children:(0,T.jsx)(o.xv,{variant:"regular",textAlign:"center",className:"text-light",children:V(0===Q?"transactions_list.noData":"transactions_list.noMoreTransactions")})})]}),scrollableTarget:"scrollableDiv",children:lt()})})]})})}}}]);
//# sourceMappingURL=8390.e4a452aa.chunk.js.map