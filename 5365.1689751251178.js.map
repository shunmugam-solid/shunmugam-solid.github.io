{"version":3,"file":"5365.1689751251178.js","mappings":"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","sources":["webpack://Solid/./src/modules/card/views/SetATMPin.vue?3259","webpack://Solid/./src/components/InputBox.vue?84d6","webpack://Solid/src/components/InputBox.vue","webpack://Solid/./src/components/InputBox.vue?03c7","webpack://Solid/./src/components/InputBox.vue","webpack://Solid/src/modules/card/views/SetATMPin.vue","webpack://Solid/./src/modules/card/views/SetATMPin.vue?e596","webpack://Solid/./src/modules/card/views/SetATMPin.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"widgetContainer shippingAddress\"},[_c('div',{staticClass:\"navigationHeader\"},[_c('div',{staticClass:\"navigationHeader__inner\"},[_c('span',{staticClass:\"icon-Arrow-big-left cancel\",on:{\"click\":function($event){return _vm.drawerBack()}}}),_c('p',{staticClass:\"title\"},[_vm._v(\" \"+_vm._s(_vm.$t('set_ATM_Pin'))+\" \")])])]),_c('div',{staticClass:\"widgetContainer__body\"},[_c('el-form',{ref:\"atmPinForm\",staticClass:\"wise-form\",attrs:{\"model\":_vm.formData,\"rules\":_vm.formRules}},[_c('div',{staticClass:\"field-wrapper d-none\",attrs:{\"id\":\"dummy\"}}),_c('el-form-item',{attrs:{\"prop\":\"pin\",\"label\":_vm.$t('enter_pin_text')}},[_c('div',[_c('input-box',{attrs:{\"focus-first-input\":_vm.setFocusFirstInput},on:{\"change\":function (code) { return _vm.formData.pin = code; }}})],1)]),_c('el-form-item',{attrs:{\"prop\":\"rePin\",\"label\":_vm.$t('re-enter_pin_text')}},[_c('div',[_c('input-box',{attrs:{\"reset-fields\":_vm.setFocusFirstInput},on:{\"change\":function (code) { return _vm.formData.rePin = code; }}})],1)])],1),_c('p',{staticClass:\"desclaimer-text\"},[_vm._v(\" \"+_vm._s(_vm.$t('pin_use_desclaimer'))+\" \"),(_vm.isLearnMoreVisible)?_c('a',{attrs:{\"target\":\"_blank\",\"href\":_vm.learnMoreUrl}},[_vm._v(_vm._s(_vm.$t('learn_more')))]):_vm._e()])],1),_c('div',{staticClass:\"el-drawer__footer\"},[_c('el-button',{staticClass:\"el-button__brand brand width-100\",attrs:{\"data-testid\":\"submit\",\"type\":\"primary\",\"disabled\":!_vm.isFormValid},on:{\"click\":_vm.next}},[_vm._v(\" \"+_vm._s(_vm.$t('save'))+\" \")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"otp-container\"},[_c('el-input',{ref:\"otpcode1\",attrs:{\"type\":\"password\",\"value\":_vm.formData.otpcode1,\"disabled\":_vm.isTemporarilyDisabled,\"inputmode\":\"numeric\",\"pattern\":\"[0-9]*\",\"autocomplete\":\"one-time-code\"},on:{\"input\":function($event){return _vm.handleInput(1, $event)}},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"delete\",[8,46],$event.key,[\"Backspace\",\"Delete\",\"Del\"])){ return null; }return _vm.handleDelete(1)}}}),_c('el-input',{ref:\"otpcode2\",attrs:{\"type\":\"password\",\"inputmode\":\"numeric\",\"pattern\":\"[0-9]*\",\"value\":_vm.formData.otpcode2,\"disabled\":_vm.isTemporarilyDisabled},on:{\"input\":function($event){return _vm.handleInput(2, $event)}},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"delete\",[8,46],$event.key,[\"Backspace\",\"Delete\",\"Del\"])){ return null; }return _vm.handleDelete(2)}}}),_c('el-input',{ref:\"otpcode3\",attrs:{\"type\":\"password\",\"inputmode\":\"numeric\",\"pattern\":\"[0-9]*\",\"value\":_vm.formData.otpcode3,\"disabled\":_vm.isTemporarilyDisabled},on:{\"input\":function($event){return _vm.handleInput(3, $event)}},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"delete\",[8,46],$event.key,[\"Backspace\",\"Delete\",\"Del\"])){ return null; }return _vm.handleDelete(3)}}}),_c('el-input',{ref:\"otpcode4\",attrs:{\"type\":\"password\",\"inputmode\":\"numeric\",\"pattern\":\"[0-9]*\",\"value\":_vm.formData.otpcode4,\"disabled\":_vm.isTemporarilyDisabled},on:{\"input\":function($event){return _vm.handleInput(4, $event)}},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"delete\",[8,46],$event.key,[\"Backspace\",\"Delete\",\"Del\"])){ return null; }return _vm.handleDelete(4)}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"otp-container\">\n    <el-input ref=\"otpcode1\"\n              type=\"password\"\n              :value=\"formData.otpcode1\"\n              :disabled=\"isTemporarilyDisabled\"\n              inputmode=\"numeric\"\n              pattern=\"[0-9]*\"\n              autocomplete=\"one-time-code\"\n              @input=\"handleInput(1, $event)\"\n              @keyup.delete.native=\"handleDelete(1)\" />\n    <el-input ref=\"otpcode2\"\n              type=\"password\"\n              inputmode=\"numeric\"\n              pattern=\"[0-9]*\"\n              :value=\"formData.otpcode2\"\n              :disabled=\"isTemporarilyDisabled\"\n              @input=\"handleInput(2, $event)\"\n              @keyup.delete.native=\"handleDelete(2)\" />\n    <el-input ref=\"otpcode3\"\n              type=\"password\"\n              inputmode=\"numeric\"\n              pattern=\"[0-9]*\"\n              :value=\"formData.otpcode3\"\n              :disabled=\"isTemporarilyDisabled\"\n              @input=\"handleInput(3, $event)\"\n              @keyup.delete.native=\"handleDelete(3)\" />\n    <el-input ref=\"otpcode4\"\n              type=\"password\"\n              inputmode=\"numeric\"\n              pattern=\"[0-9]*\"\n              :value=\"formData.otpcode4\"\n              :disabled=\"isTemporarilyDisabled\"\n              @input=\"handleInput(4, $event)\"\n              @keyup.delete.native=\"handleDelete(4)\" />\n  </div>\n</template>\n<script>\nexport default {\n  props: {\n    otpNumber: {\n      type: String,\n      default: ''\n    },\n    focusFirstInput: {\n      type: Boolean,\n      default: false\n    },\n    resetFields: {\n      type: Boolean,\n      default: false\n    },\n  },\n  data() {\n    return {\n      isTemporarilyDisabled: false,\n      formData: {\n        otpcode1: null,\n        otpcode2: null,\n        otpcode3: null,\n        otpcode4: null,\n      }\n    }\n  },\n  computed: {\n    otpcode() {\n      let form = this.formData;\n      if(Object.keys(this.formData).some(key => this.formData[key] == null)) return '';\n      return `${form.otpcode1}` +\n        `${form.otpcode2}` +\n        `${form.otpcode3}` +\n        `${form.otpcode4}` \n    },\n  },\n  mounted() {\n    this.setFocusFirstInput();\n\n    const target = document.querySelector('div.otp-container');\n    target.addEventListener('paste', (event) => {\n      let paste = (event.clipboardData || window.clipboardData).getData('text');\n      if (paste != null) {\n        let pastedOtp = paste.match(/(\\d+)/);\n        if (pastedOtp != null && pastedOtp[0] != null) {\n          let otpPastedNumber = pastedOtp[0];\n          if (otpPastedNumber.length === 4) {\n            for (let index in otpPastedNumber) {\n              let otpCodeRef = `otpcode${parseInt(index) + 1}`;\n              this.formData[otpCodeRef] = otpPastedNumber[index];\n            }\n            if (this.otpcode.length === 4) {\n              this.$emit('done', this.otpcode);\n            } \n          }\n        }\n      }\n      event.preventDefault();\n    });\n  },\n  methods: {\n    resetInputFields() {\n      this.formData.otpcode1 = null;\n      this.formData.otpcode2 = null;\n      this.formData.otpcode3 = null;\n      this.formData.otpcode4 = null;\n    },\n    setFocusFirstInput() {\n      this.$refs.otpcode1.focus();\n    },\n    isFilled() {\n      return this.otpcode.length === 4;\n    },\n    handleInput(no, event) {\n      // let event = e.data;\n      let inputEvent = /[0-9]/g.test(event) ? (event + '') : null;\n      if (inputEvent == null) return;\n\n      let parsedValue = parseInt(inputEvent);\n      let isLast = no === 4;\n      let otpCodeRef = `otpcode${no}`;\n\n      if (parsedValue && this.otpcode.length === 4) return;\n\n      if (this.formData[otpCodeRef] != null) {\n        let lastNumber = parseInt((parsedValue + '').slice(-1));\n        this.handleInput(no + 1, lastNumber);\n        return;\n      }\n\n      if (isNaN(parsedValue) || parsedValue == null) {\n        this.formData[otpCodeRef] = null;\n        return;\n      }\n      this.formData[otpCodeRef] = parsedValue;\n      if (!isLast) this.$refs['otpcode' + (no + 1)].focus();\n      if (isLast && this.otpcode.length < 4) {\n        let missing = Object.keys(this.formData).find(key => this.formData[key] == null);\n        this.$refs[missing].focus();\n      }\n      if (this.otpcode.length === 4) {\n        this.$emit('done', this.otpcode);\n      }\n\n      this.$emit('change', this.otpcode);\n    },\n    handleDelete(no) {\n      let isFirst = no === 1;\n      let otpCodeRef = `otpcode${no}`;\n      this.$emit('changeOTP');\n      if (this.formData[otpCodeRef] == null && !isFirst) {\n        this.$refs[`otpcode${no - 1}`].focus();\n        this.formData[`otpcode${no - 1}`] = null;\n        return;\n      }\n      if (this.formData[otpCodeRef] != null) {\n        this.formData[otpCodeRef] = null;\n      }\n\n      this.$emit('change', this.otpcode);\n    },\n    disableTemporarily(seconds) {\n      this.isTemporarilyDisabled = true;\n      setTimeout(() => {\n        this.isTemporarilyDisabled = false;\n      }, seconds * 1000);\n    },\n  },\n  watch: {\n    otpNumber: {\n      handler: function(val) {\n        if (val && val.length === 4) {\n          for (let chara in val) {\n            // let otpCodeRef = `otpcode${parseInt(chara) + 1}`;\n            // this.$refs[otpCodeRef].focus();\n            // this.formData[otpCodeRef] = val[chara];\n            this.handleInput((parseInt(chara) + 1), val[chara]);\n          }\n        }\n      },\n      deep: true\n    },\n    resetFields: function (newVal) {\n      if(newVal == true) {\n        this.resetInputFields();\n      }\n    },\n    focusFirstInput: function (newVal) {\n      if(newVal == true) {\n        this.resetInputFields();\n        this.setFocusFirstInput();\n      }\n    }\n  },\n}\n</script>\n<style lang=\"scss\">\n.otp-container {\n  display: inline-block;\n//   border-radius: var(--base-radius);\n  margin: 10px 0px;\n  .el-input {\n    display: inline-block;\n    width: auto;\n    margin-right: 20px;\n    &:focus {\n      z-index: 1;\n    }\n\n    &.is-disabled {\n      .el-input__inner {\n        background-color: transparent;\n      }\n    }\n\n    &__inner {\n      border: 1px solid #E3E8ED;\n      border-radius: 5px;\n    //   border-right: none;\n      color: var(--platinum);\n      text-align: center;\n      font-size: 20px;\n      font-weight: 600;\n      width: 50px;\n      height: 50px;\n\n      &:focus {\n        border-color: transparent;\n        box-shadow: 0px 0px 0px 1px black;\n        position: relative;\n        z-index: 1;\n      }\n\n      &:disabled {\n        background-color: transparent;\n        color: var(--shadow-blue);\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./InputBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./InputBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InputBox.vue?vue&type=template&id=55cd8604&\"\nimport script from \"./InputBox.vue?vue&type=script&lang=js&\"\nexport * from \"./InputBox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./InputBox.vue?vue&type=style&index=0&id=55cd8604&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"widgetContainer shippingAddress\">\n    <div class=\"navigationHeader\">\n      <div class=\"navigationHeader__inner\">\n        <span class=\"icon-Arrow-big-left cancel\" @click=\"drawerBack()\" />\n        <p class=\"title\">\n          {{ $t('set_ATM_Pin') }}\n        </p>\n      </div>\n    </div>\n    <div class=\"widgetContainer__body\">\n      <el-form\n        class=\"wise-form\"\n        ref=\"atmPinForm\"\n        :model=\"formData\"\n        :rules=\"formRules\">\n        <div id=\"dummy\" class=\"field-wrapper d-none\" />\n        <!-- <input type=\"text\" :value=\"getSelectedCard.last4\" id=\"last4\" name=\"last4\"> -->\n        <el-form-item prop=\"pin\" :label=\"$t('enter_pin_text')\">\n          <div>\n            <input-box @change=\"(code) => formData.pin = code\" :focus-first-input=\"setFocusFirstInput\" />\n          </div>\n        </el-form-item>\n\n        <el-form-item prop=\"rePin\" :label=\"$t('re-enter_pin_text')\">\n          <div>\n            <input-box @change=\"(code) => formData.rePin = code\" :reset-fields=\"setFocusFirstInput\" />\n          </div>\n        </el-form-item>\n      </el-form>\n      <p class=\"desclaimer-text\">\n        {{ $t('pin_use_desclaimer') }}\n        <a target=\"_blank\" :href=\"learnMoreUrl\" v-if=\"isLearnMoreVisible\">{{ $t('learn_more') }}</a>\n      </p>\n    </div>\n    <div class=\"el-drawer__footer\">\n      <el-button data-testid=\"submit\" type=\"primary\" @click=\"next\" class=\"el-button__brand brand width-100\" :disabled=\"!isFormValid\">\n        {{ $t('save') }}\n      </el-button>\n    </div>\n  </div>\n</template>\n<script>\nimport { mapActions, mapGetters } from 'vuex';\nimport InputBox from '@/components/InputBox.vue';\nimport { getBrandConfig, getEnv } from '@/utils/env';\n\nexport default {\n  name: 'SetATMPin',\n  components: {\n    InputBox\n  },\n  data() {\n    var validateRePin = (rule, value, callback) => {\n      if (value !== this.formData.pin) {\n        callback(new Error(this.$t('pin_mismatch_error')));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      setFocusFirstInput: false,\n      formData: {\n        pin: '',\n        rePin: ''\n      },\n      formRules: {\n        rePin:[\n          {\n            validator: validateRePin\n          }\n        ]\n      }\n    };\n  },\n  computed: {\n    ...mapGetters('card', ['getSelectedCard']),\n    isFormValid() {\n      return this.formData.pin && this.formData.pin.length === 4 && this.formData.pin === this.formData.rePin;\n    },\n    learnMoreUrl() {\n      return getBrandConfig('atmPinLearnMore');\n    },\n    isLearnMoreVisible() {\n      return getBrandConfig('atmPinLearnMore');\n    }\n  },\n  mounted() {\n    if(!window.VGSCollect) {\n      const loader = this.showLoader();\n      window.addVgsCollectScript(() => {\n        this.loadForm();\n        loader.close();\n        \n      })\n    } else {\n      this.loadForm();\n    }\n  },\n  methods: {\n    ...mapActions('card', ['pinToken']),\n    notificationClosed() {\n      this.$refs.atmPinForm.resetFields();\n      this.setFocusFirstInput = true;\n      this.$nextTick(()=> {\n        this.setFocusFirstInput = false;\n      });\n    },\n    loadForm() {\n      let vaultId = getEnv('VUE_APP_VGS_VALUTID');\n      const isProduction = getEnv('VUE_APP_ENV') === 'prod';\n\n      this.form = window.VGSCollect.create(vaultId, isProduction ? 'live' : 'sandbox', () => {\n\n      });\n\n      this.form.field('#dummy', {\n        type: 'text',\n        name: 'dummy',\n        // hideValue: true\n      })\n\n    },\n    next() {\n      this.$refs.atmPinForm.validate((valid) => {\n        if (!valid) return;\n        \n        const allNums = '0123456789';\n        const allNumsRev = '9876543210';\n        const pin = this.formData.pin;\n\n        if (allNums.indexOf(pin) !== -1 || allNumsRev.indexOf(pin) !== -1 || pin.split(pin.charAt(0)).length - 1 === 4) {\n          this.$notify({\n            title: 'Error',\n            message: this.$t('atm_pin_combination'),\n            type: 'error',\n            onClose: this.notificationClosed\n          });\n        } else {\n          const loader = this.showLoader();\n          const cardId = this.getSelectedCard.id;\n          const card = this.getSelectedCard;\n\n          const d = {\n            'pin': pin,\n            'expiryMonth': card.expiryMonth,\n            'expiryYear': card.expiryYear,\n            'last4': card.last4\n          }\n          /**\n          * get vgs collect token from api\n          */\n          this.pinToken(cardId)\n            .then((res) => {\n              const headers = {'sd-pin-token' : res.pinToken}\n              this.form.submit(`/v1/card/${cardId}/pin`, {\n                data: () => {\n                  return d;\n                },\n                headers\n              }, (status, response) => {\n                loader.close();\n                if(status === 200 && response) {\n                  \n                  // this.drawerBack();\n                  this.$notify({\n                    title: 'Success',\n                    message: this.$t('pin_set_success'),\n                    type: 'success'\n                  });\n                  this.drawerPush('CardManagement');\n                }\n                \n              }, function(errors) {\n                console.log('errors', errors);\n                loader.close();\n                // errors object:\n                //{\n                //  <invalid field name>: {\n                //    <field state>\n                //  },\n                //}\n              });\n            })\n            .catch((e) => {\n              loader.close();\n              this.apiErrorMessage(e);\n            })\n        }\n      });\n    },\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.d-none {\n  display: none;\n}\n.shippingAddress {\n  .el-drawer__body & {\n    .default-drawer & {\n      min-height: 100vh;\n      .widgetContainer__body {\n        display: flex;\n        flex-direction: column;\n        padding-bottom: 0;\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SetATMPin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SetATMPin.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SetATMPin.vue?vue&type=template&id=54817bf4&scoped=true&\"\nimport script from \"./SetATMPin.vue?vue&type=script&lang=js&\"\nexport * from \"./SetATMPin.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SetATMPin.vue?vue&type=style&index=0&id=54817bf4&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"54817bf4\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","$event","drawerBack","_v","_s","$t","ref","attrs","formData","formRules","setFocusFirstInput","code","pin","rePin","learnMoreUrl","_e","isFormValid","next","staticRenderFns","otpcode1","isTemporarilyDisabled","handleInput","nativeOn","type","indexOf","_k","keyCode","key","handleDelete","otpcode2","otpcode3","otpcode4","props","otpNumber","default","focusFirstInput","resetFields","data","computed","otpcode","mounted","target","event","methods","resetInputFields","isFilled","disableTemporarily","setTimeout","seconds","watch","handler","deep","component","name","components","InputBox","callback","validator","isLearnMoreVisible","window","loader","notificationClosed","loadForm","title","message","onClose","then","res","headers","console","catch","e"],"sourceRoot":""}