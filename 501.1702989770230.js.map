{"version":3,"file":"501.1702989770230.js","mappings":"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","sources":["webpack://Solid/./src/modules/fund/views/LinkCard.vue?7163","webpack://Solid/src/modules/fund/views/LinkCard.vue","webpack://Solid/./src/modules/fund/views/LinkCard.vue?0ace","webpack://Solid/./src/modules/fund/views/LinkCard.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"widgetContainer bg-white widgetContainer--scrollable pullFunds\"},[_c('div',{staticClass:\"navigationHeader\"},[_c('div',{staticClass:\"navigationHeader__inner\"},[_c('span',{staticClass:\"icon-Arrow-big-left cancel\",on:{\"click\":_vm.backAction}}),_c('p',{staticClass:\"title\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"pull_fund_row_title\"))+\" \")])])]),_c('div',{staticClass:\"widgetContainer__body\"},[[_c('h1',{staticClass:\"header-1\"},[_vm._v(\" \"+_vm._s(_vm.$t(\"pull_fund_headerTitle\"))+\" \")]),_c('el-form',{ref:\"linkCard\",staticClass:\"wise-form\"},[_c('el-form-item',{staticClass:\"is-no-asterisk\",attrs:{\"label\":_vm.$t('pull_from_card_number')}},[_c('div',{staticClass:\"vgs-input\",attrs:{\"id\":\"cc-number\"}},[(_vm.showSkeleton)?_c('el-skeleton-item',{attrs:{\"variant\":\"h1\"}}):_vm._e()],1)]),_c('el-form-item',{staticClass:\"is-no-asterisk\",attrs:{\"label\":_vm.$t('pull_from_card_expiry')}},[_c('div',{staticClass:\"vgs-input\",attrs:{\"id\":\"cc-expiration-date\"}},[(_vm.showSkeleton)?_c('el-skeleton-item',{attrs:{\"variant\":\"h1\"}}):_vm._e()],1)])],1)]],2),_c('div',{staticClass:\"el-drawer__footer\"},[_c('el-button',{staticClass:\"el-button__brand brand width-100\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.createContactFn}},[_vm._v(\" \"+_vm._s(_vm.$t(\"next\"))+\" \")])],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"widgetContainer bg-white widgetContainer--scrollable pullFunds\">\n    <div class=\"navigationHeader\">\n      <div class=\"navigationHeader__inner\">\n        <span class=\"icon-Arrow-big-left cancel\" @click=\"backAction\" />\n        <p class=\"title\">\n          {{ $t(\"pull_fund_row_title\") }}\n        </p>\n      </div>\n    </div>\n\n    <div class=\"widgetContainer__body\">\n      <template>\n        <h1 class=\"header-1\">\n          {{ $t(\"pull_fund_headerTitle\") }}\n        </h1>\n\n        <el-form class=\"wise-form\" ref=\"linkCard\">\n          <el-form-item\n            class=\"is-no-asterisk\"\n            :label=\"$t('pull_from_card_number')\">\n            <div id=\"cc-number\" class=\"vgs-input\">\n              <el-skeleton-item variant=\"h1\" v-if=\"showSkeleton\" />\n            </div>\n          </el-form-item>\n          <el-form-item\n            class=\"is-no-asterisk\"\n            :label=\"$t('pull_from_card_expiry')\">\n            <div id=\"cc-expiration-date\" class=\"vgs-input\">\n              <el-skeleton-item variant=\"h1\" v-if=\"showSkeleton\" />\n            </div>\n          </el-form-item>\n        </el-form>\n      </template>\n    </div>\n    <div class=\"el-drawer__footer\">\n      <el-button\n        type=\"primary\"\n        @click=\"createContactFn\"\n        class=\"el-button__brand brand width-100\">\n        {{ $t(\"next\") }}\n      </el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getEnv } from '@/utils/env';\nimport { mapGetters, mapActions } from 'vuex';\nexport default {\n  data() {\n    return {\n      selectedBank: null,\n      showSkeleton: true,\n      form: null,\n      createdContactId: null,\n    };\n  },\n  computed: {\n    ...mapGetters('user', ['getPersonDetails']),\n    ...mapGetters('account', ['getSelectedAccount']),\n  },\n  mounted() {\n    if (!window.VGSCollect) {\n      const loader = this.showLoader();\n      window.addVgsCollectScript(() => {\n        this.loadForm();\n        loader.close();\n      });\n    } else {\n      this.loadForm();\n    }\n  },\n  methods: {\n    ...mapActions('contact', [\n      'createContact',\n      'archiveContact',\n      'listSelfCards'\n    ]),\n    ...mapActions('contact', ['getLinkCardToken']),\n    backAction() {\n      this.drawerBack();\n    },\n    loadForm() {\n      let vaultId = getEnv('VUE_APP_VGS_VALUTID');\n      const isProduction = getEnv('VUE_APP_ENV') === 'prod';\n      this.form = window.VGSCollect.create(\n        vaultId,\n        isProduction ? 'live' : 'sandbox',\n        () => {}\n      );\n\n      const VGSinputStyle = {\n        boxSizing: 'border-box',\n        fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\"',\n        border: '1px solid #edeff1',\n        borderRadius: '4px',\n        height: '48px',\n        color: '#141414',\n        lineHeight: '40px',\n        outline: 'none',\n        padding: '0 15px',\n      };\n\n      this.form.field('#cc-number', {\n        type: 'card-number',\n        name: 'debitCard.cardNumber',\n        placeholder: '**** **** **** ****',\n        showCardIcon: false,\n        validations: ['required', 'validCardNumberExtended'],\n        css: VGSinputStyle,\n      });\n\n      this.form.field('#cc-expiration-date', {\n        type: 'card-expiration-date',\n        name: 'debitCard',\n        placeholder: 'MM / YYYY',\n        yearLength: '4',\n        serializers: [\n          {\n            name: 'separate',\n            options: { monthName: 'expiryMonth', yearName: 'expiryYear' },\n          },\n        ],\n        validations: ['required', 'validCardExpirationDate'],\n        css: VGSinputStyle,\n      });\n      this.showSkeleton = false;\n    },\n    createContactFn() {\n      const loader = this.showLoader();\n      const cardNumber = this.form.state['debitCard.cardNumber'];\n      const card_exp = this.form.state.debitCard;\n      if (!cardNumber.isValid || !card_exp.isValid) {\n        loader.close();\n        this.apiErrorMessage('Invalid card details');\n        return false;\n      }\n      const person = this.getPersonDetails;\n      if (this.getSelectedAccount.id && person) {\n        this.createContact({\n          accountId: this.getSelectedAccount.id,\n          name: person.firstName + ' ' + person.lastName,\n          phone: person.phone,\n          email: person.email,\n          card: {\n            address: {\n              ...person.address,\n              addressType: 'card',\n            },\n          },\n        })\n          .then((res) => {\n            this.createdContactId = res.id;\n            this.getLinkCardToken(this.createdContactId)\n              .then((d) => {\n                const self = this;\n                self.form.submit(\n                  '/v1/contact/' + this.createdContactId + '/debitcard',\n                  {\n                    headers: {\n                      'sd-debitcard-token': d.debitCardToken,\n                    },\n                    method: 'PATCH',\n                    mapDotToObject: 'merge',\n                    data: {\n                      debitCard: {\n                        address: {\n                          ...person.address,\n                          addressType: '',\n                        },\n                      },\n                    },\n                  },\n                  function (status, data) {\n                    loader.close();\n                    if (status !== 200) {\n                      if (status === 400 && data.sysMessage === 'expiry year') {\n                        self.apiErrorMessage('Invalid expiry date');\n                      } else {\n                        self.apiErrorMessage(data.message);\n                      }\n                      if (self.createdContactId) {\n                        self.archiveContact(self.createdContactId).catch(\n                          (e) => {\n                            self.apiErrorMessage(e);\n                          }\n                        );\n                      }\n                    } else {\n                      self.drawerPush('pullfromcard');\n                    }\n                  },\n                  (e) => {\n                    console.log(e);\n                    loader.close();\n                    if (self.createdContactId) {\n                      self.archiveContact(self.createdContactId).catch((e) => {\n                        self.apiErrorMessage(e);\n                      });\n                    }\n                    self.apiErrorMessage('Something went wrong');\n                  }\n                );\n              })\n              .catch((e) => {\n                if (this.createdContactId) {\n                  this.archiveContact(this.createdContactId).catch((e) => {\n                    this.apiErrorMessage(e);\n                  });\n                }\n                loader.close();\n                this.apiErrorMessage(e);\n              })\n          })\n          .catch((e) => {\n            loader.close();\n            this.apiErrorMessage(e);\n          });\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.pullFunds {\n  position: relative;\n\n  .checkList {\n    margin-bottom: 32px;\n  }\n\n  .listSimpleArrows {\n    margin-top: 0;\n  }\n\n  .vgs-input {\n    width: 100%;\n    height: 48px;\n    overflow: hidden;\n    iframe {\n      width: 100%;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LinkCard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./LinkCard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./LinkCard.vue?vue&type=template&id=ca4af00c&\"\nimport script from \"./LinkCard.vue?vue&type=script&lang=js&\"\nexport * from \"./LinkCard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./LinkCard.vue?vue&type=style&index=0&id=ca4af00c&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","backAction","_v","_s","$t","ref","attrs","_e","createContactFn","staticRenderFns","data","selectedBank","showSkeleton","form","createdContactId","computed","mounted","window","loader","methods","loadForm","vaultId","isProduction","boxSizing","fontFamily","border","borderRadius","height","color","lineHeight","outline","padding","type","name","placeholder","showCardIcon","validations","css","yearLength","serializers","options","monthName","yearName","accountId","phone","email","card","address","addressType","then","res","d","self","headers","method","mapDotToObject","debitCard","e","catch","component"],"sourceRoot":""}