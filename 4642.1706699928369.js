"use strict";(self["webpackChunkSolid"]=self["webpackChunkSolid"]||[]).push([[4642,4657],{714:function(t,e,a){a.d(e,{Z:function(){return v}});var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.showMiniDetails?"include-mini-details":""},[s("div",{staticClass:"card",class:t.card.cardType,on:{click:t.viewCard}},[t.cardImg?s("img",{staticClass:"card-image",attrs:{src:t.cardImg,alt:"Card"}}):s("div",{staticClass:"card__default"}),s("div",{staticClass:"card__info"},[s("div",[s("p",{staticClass:"card-type"},[t._v(" "+t._s(t.$t("physical"===t.card.cardType?"cardType_physical":"cardType_virtual"))+" ")]),s("p",{staticClass:"card-limit-use"},[t._v(" "+t._s(t.spendingLimit)+" ")])]),s("div",[s("div",[t.showSecretData?s("p",{ref:"secret-data",staticClass:"card-number",attrs:{id:"secret-data"}}):s("p",{staticClass:"card-number"},[t._v(" **** **** **** "+t._s(t.card.last4)+" ")]),s("div",{staticClass:"exp-cvv"},[s("div",[s("p",[t._v("EXP")]),s("span",[t._v(t._s(t.card.expiryMonth)+" / "+t._s(t.card.expiryYear))])]),t.showSecretData?s("div",[s("p",[t._v(t._s(t.$t("cardInfo_detail_cvv")))]),s("span",{ref:"secret-data-cvv",attrs:{id:"secret-data-cvv"}})]):t._e()]),s("p",{staticClass:"card-holder"},[t._v(" "+t._s(t.card.cardholder.name)+" ")]),t.getSelectedBusiness&&t.isBusinessAccountType?s("p",{staticClass:"card-holder-company"},[t._v(" "+t._s(t.getSelectedBusiness.legalName)+" ")]):t._e(),t.showActivationSwitch?s("div",{staticClass:"active-wrapper"},[s("el-switch",{staticClass:"keep-default",attrs:{width:35},nativeOn:{click:function(e){return t.toggleFreeze(e)}},model:{value:t.isActive,callback:function(e){t.isActive=e},expression:"isActive"}}),s("span",[t._v(t._s(t.cardStatus[t.card.cardStatus]))])],1):t._e()]),t.showLogo?s("div",{staticClass:"card-logo"},[s("img",{attrs:{src:a(6270),alt:"Visa"}})]):t._e()])])]),t.showMiniDetails?s("div",{staticClass:"mini-details"},[s("div",{staticClass:"mini-details__row"},[s("div",{staticClass:"mini-details__inner"},[s("label",[t._v(t._s(t.$t("label")))]),s("div",{staticClass:"mini-details__data"},[t._v(" "+t._s(t.card.label)+" ")])]),s("div",{staticClass:"mini-details__inner"},[s("label",[t._v(" "+t._s(t.$t("card_spendLimit"))+" ")]),s("div",{staticClass:"mini-details__data"},[t._v(" $ "+t._s(t.card.limitAmount)+" ")])])])]):t._e()])},i=[],r=a(629),c=a(9651),d=a(9896),l=a(1712),n={name:"Card",props:{card:Object,showActivationSwitch:{type:Boolean,default:!1},showLogo:{type:Boolean,default:!0},showSecretData:{type:Boolean,default:!1},showMiniDetails:{type:Boolean,default:!1}},data(){return{isActive:"active"===this.card.cardStatus,cardStatus:c.l3,cardType:c.Iw}},computed:{...(0,r.Se)("user",["getPersonDetails","getProgramDetails","getUserAuthToken"]),...(0,r.Se)("kyb",["getSelectedBusiness"]),...(0,r.Se)("account",["isBusinessAccountType"]),spendingLimit(){return(0,l.oB)(this.card.limitAmount)+" "+(c.KZ.cardBoxTitle[this.card.limitInterval]||"")},cardImg(){const t=this.getProgramDetails;return"physical"==this.card.cardType?t&&t.brand&&t.brand.cardArtPhysical?t.brand.cardArtPhysical:null:t&&t.brand&&t.brand.cardArtVirtual?t.brand.cardArtVirtual:null}},mounted(){this.showSecretData&&window.addVgsScript((()=>{this.getCardSecret()}))},methods:{...(0,r.OI)("card",["updateSelectedCard"]),...(0,r.nv)("card",["updateCard","showToken"]),activate(t){t.stopPropagation(),this.updateSelectedCard(this.card),setTimeout((()=>{this.$emit("changeDrawer","activate")}),0)},viewCard(t){window.analytics&&window.analytics.track("homeCardDetails"),"pendingActivation"!==this.card.cardStatus?(this.updateSelectedCard(this.card),this.$emit("changeDrawer","manage")):this.activate(t)},toggleFreeze(t){if(t.stopPropagation(),"pendingActivation"===this.card.cardStatus)return this.isActive=!1,void this.activate(t);const e="active"===this.card.cardStatus;this.$confirm(this.$t(e?"cardInfo_freeze_alert_messsage":"cardInfo_unfreeze_alert_messsage"),this.$t(e?"cardInfo_freeze_alert_title":"cardInfo_unfreeze_alert_title"),{confirmButtonText:this.$t(e?"cardInfo_freeze_button":"cardInfo_unfreeze_button"),cancelButtonText:this.$t("cancel")}).then((()=>{this.freeze()})).catch((()=>{this.isActive=!this.isActive}))},freeze(){const t=this.showLoader();this.updateCard({cardId:this.card.id,payload:{cardStatus:this.isActive?"active":"inactive"}}).then((t=>{this.isActive="active"===t.cardStatus,this.card.cardStatus=t.cardStatus,this.$emit("update",this.card)})).catch((t=>{console.log(t),this.apiErrorMessage(t)})).finally((()=>{t.close()}))},getCardSecret(){let t=(0,d.dU)("VUE_APP_VGS_VALUTID");const e=this.showLoader();this.showToken(this.card.id).then((e=>{const a={"sd-show-token":e.showToken};let s=window.VGSShow.create(t);const i=s.request({name:"cardNoIframe",method:"GET",headers:a,path:`/v1/card/${this.card.id}/show`,jsonPathSelector:"cardNumber",serializers:[s.SERIALIZERS.replace("(\\d{4})(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3 $4")]});i.render(this.$refs["secret-data"],{color:"#fff",fontSize:"14px",display:"block",height:"16px",overflow:"hidden"});const r=s.request({name:"cvvIframe",method:"GET",headers:a,path:`/v1/card/${this.card.id}/show`,jsonPathSelector:"cvv"});r.render(this.$refs["secret-data-cvv"],{color:"#fff",fontSize:"16px",display:"block",height:"16px",overflow:"hidden"}),this.$emit("cardNumberDisplay",{show:s,headers:a})})).catch((()=>{})).finally((()=>{e.close()}))}},watch:{card:{handler(t){this.isActive="active"===t.cardStatus},deep:!0}}},o=n,h=a(3736),u=(0,h.Z)(o,s,i,!1,null,null,null),v=u.exports},4642:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"widgetContainer cardManagement"},[a("div",{staticClass:"navigationHeader"},[a("div",{staticClass:"navigationHeader__inner"},[a("p",{staticClass:"title"},[t._v(" "+t._s(t.$t("details_title"))+" ")]),a("span",{staticClass:"el-icon-close",on:{click:t.drawerClose}})])]),a("div",{staticClass:"widgetContainer__body"},[a("div",{staticClass:"cardInfo"},[a("div",{staticClass:"cardInfo__card"},[a("div",{staticClass:"card-front"},[a("Card",{key:t.getSelectedCard.id,attrs:{card:t.getSelectedCard,"show-logo":!1,"show-secret-data":!0,"show-activation-switch":!0},on:{update:function(e){return t.onUpdate(e)},cardNumberDisplay:t.cardNumberDisplay}})],1)])]),a("div",{staticClass:"listWithActions card-number-copy"},[a("ul",{staticClass:"main-actions border-1"},[a("li",{staticClass:"action-box card-number"},[a("div",{staticClass:"details"},[a("p",{staticClass:"label"},[t._v(" "+t._s(t.$t("cardInfo_row_title_CardNo"))+": ")]),a("div",{ref:"secret-data-card-number",staticClass:"gray-text"})]),a("div",{staticClass:"action"},[a("div",{ref:"copy-btn"})])])])]),a("div",{staticClass:"listWithActionsv2",on:{click:t.payHistory}},[a("ul",[a("li",{staticClass:"action-box"},[a("div",{staticClass:"details"},[a("p",{staticClass:"label"},[t._v(" "+t._s(t.$t("cardInfo_row_title_transactions"))+" ")])]),t._m(0)])])]),a("div",{staticClass:"listWithActionsv2"},[a("h4",{staticClass:"header-2"},[t._v(" "+t._s(t.$t("cardInfo_section_actions"))+" ")]),a("ul",[a("li",{staticClass:"cursor-auto"},[a("div",{staticClass:"details"},[a("p",{staticClass:"label"},[t._v(" "+t._s(t.$t("cardInfo_row_title_freeze"))+" ")])]),a("div",{staticClass:"action"},[a("el-switch",{attrs:{"active-color":"var(--branding)","inactive-color":"#dfdfe4"},on:{change:t.toggleFreeze},model:{value:t.freezeCard,callback:function(e){t.freezeCard=e},expression:"freezeCard"}})],1)]),a("li",{staticClass:"cursor-auto"},[a("div",{staticClass:"details"},[a("p",{staticClass:"label"},[t._v(" "+t._s(t.$t("card_label"))+" : "),a("span",{staticClass:"gray-text"},[t._v(t._s(t.getSelectedCard.label))])])]),a("div",{staticClass:"action action--text"},[a("a",{attrs:{href:"#"},on:{click:function(e){return t.edit(e)}}},[t._v(t._s(t.$t("Edit")))])])]),a("li",{staticClass:"cursor-auto"},[a("div",{staticClass:"details"},[a("p",{staticClass:"label"},[t._v(" "+t._s(t.$t("card_spendLimit"))+" : "),a("span",{staticClass:"green-text"},[t._v(t._s(t._f("currency")(t.spendingLimit)))])])]),a("div",{staticClass:"action action--text"},[a("a",{attrs:{href:"#"},on:{click:function(e){return t.edit(e)}}},[t._v(t._s(t.$t("Edit")))])])]),a("li",{staticClass:"cursor-auto",on:{click:t.atmInfo}},[a("div",{staticClass:"details"},[a("p",{staticClass:"label"},[t._v(" "+t._s(t.$t("info_ATM"))+" ")])]),t._m(1)]),a("li",{staticClass:"d-none",on:{click:t.replaceCard}},[t._m(2),t._m(3),t._m(4)]),a("li",{on:{click:t.deleteCard}},[a("div",{staticClass:"details"},[a("p",{staticClass:"label"},[t._v(" "+t._s(t.$t("cardInfo_row_title_cancel"))+" ")])]),t._m(5)]),a("li",{staticClass:"get-in-touch cursor-default",on:{click:t.openHelp}},[a("div",{staticClass:"details"},[a("p",{staticClass:"label"},[t._v(" "+t._s(t.$t("cardInfo_row_title_help"))+" ")])]),t._m(6)])])])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"action"},[a("span",{staticClass:"icon-Arrow-small-right"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"action"},[a("span",{staticClass:"icon-arrow-right"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"icon"},[a("span",{staticClass:"icon-paperplane"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"details"},[a("p",{staticClass:"label"},[t._v(" Replace card ")]),a("p",{staticClass:"value"},[t._v(" You can request a new card here ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"action"},[a("span",{staticClass:"icon-Arrow-small-right"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"action"},[a("span",{staticClass:"icon-Arrow-small-right"})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"action"},[a("span",{staticClass:"icon-Arrow-small-right"})])}],r=a(629),c=a(9651),d=a(714),l={name:"CardManagement",components:{Card:d.Z},data(){return{freezeCard:!1,flippedCard:!1,cardNumber:""}},created(){this.getSelectedCard&&(this.freezeCard="inactive"===this.getSelectedCard.cardStatus)},computed:{...(0,r.Se)("card",["getSelectedCard"]),...(0,r.Se)("user",["getPersonDetails","getUserAuthToken"]),...(0,r.Se)("kyb",["getSelectedBusiness"]),status(){return c.l3[this.getSelectedCard.cardStatus]},spendingLimit(){return this.getSelectedCard.limitAmount},type(){return c.Iw[this.getSelectedCard.cardType]}},methods:{...(0,r.nv)("card",["cardDelete","updateCard"]),...(0,r.OI)("card",["updateSelectedCard","updateReplaceCardDate"]),...(0,r.OI)("transaction",["updateFilters"]),cancel(){this.drawerClose()},done(){this.drawerClose()},deleteCard(){this.$confirm(this.$t("cardInfo_cancel_alert_messsage"),this.$t("cardInfo_cancel_alert_title"),{confirmButtonText:"Yes",cancelButtonText:"No"}).then((()=>{const t=this.showLoader();this.cardDelete(this.getSelectedCard.id).then((()=>{setTimeout((()=>{this.drawerClose(),this.$emit("refresh"),this.updateSelectedCard(null)}),0)})).catch((t=>{console.log(t),this.apiErrorMessage(t)})).finally((()=>{t.close()}))})).catch((()=>{}))},replaceCard(){this.drawerPush("ReplaceCardReason")},showDetails(){this.updateReplaceCardDate(null),this.drawerPush("CardDetails")},toggleFreeze(){this.$confirm(this.$t(this.freezeCard?"cardInfo_freeze_alert_messsage":"cardInfo_unfreeze_alert_messsage"),this.$t(this.freezeCard?"cardInfo_freeze_alert_title":"cardInfo_unfreeze_alert_title"),{confirmButtonText:this.freezeCard?this.$t("cardInfo_freeze_button"):this.$t("cardInfo_unfreeze_button"),cancelButtonText:this.$t("cancel")}).then((()=>{this.freeze()})).catch((()=>{this.freezeCard=!this.freezeCard}))},freeze(){const t=this.showLoader();this.updateCard({cardId:this.getSelectedCard.id,payload:{cardStatus:this.freezeCard?"inactive":"active"}}).then((()=>{this.$emit("refresh")})).catch((t=>{console.log(t),this.apiErrorMessage(t)})).finally((()=>{t.close()}))},onUpdate(){this.$emit("refresh")},payHistory(){this.updateFilters({cardId:this.getSelectedCard.id,contactId:null}),this.$router.push("/transaction/list")},time(){return(new Date).getTime()},edit(t){t.preventDefault(),this.drawerPush("CardSpendingForm")},cardNumberDisplay({show:t,headers:e}){const a=t.request({name:"cardNoIframe2",method:"GET",headers:e,path:`/v1/card/${this.getSelectedCard.id}/show`,jsonPathSelector:"cardNumber",serializers:[t.SERIALIZERS.replace("(\\d{4})(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3 $4")]});a.render(this.$refs["secret-data-card-number"],{color:"gray",fontSize:"16px",display:"block",height:"16px"});const s=t.copyFrom(a,{text:'<svg width="13" height="13" viewBox="0 0 30 30" style="/* margin-left: calc(50% - 0.45849609375em) */"><g transform="scale(0.03125 0.03125)"><path d="M373.336 832c-99.969 0-181.336-81.374-181.336-181.338v-437.328h-74.664c-64.726 0-117.336 52.601-117.336 117.328v575.997c0 64.734 52.61 117.342 117.336 117.342h533.331c64.725 0 117.333-52.608 117.333-117.342v-74.658h-394.664z"></path><path d="M938.667 117.336c0-64.812-52.523-117.336-117.333-117.336h-447.997c-64.812 0-117.336 52.524-117.336 117.336v533.328c0 64.813 52.524 117.336 117.336 117.336h447.997c64.811 0 117.333-52.523 117.333-117.336v-533.328z"></path></g></svg>'},(t=>{if("success"===t){let t=this.$t("card");this.$notify({title:"Success",message:`${t} copied`,type:"success"})}}));s.render(this.$refs["copy-btn"],{cursor:"pointer",overflow:"hidden",left:"auto",right:"0",width:"auto"})},atmInfo(){this.drawerPush("AtmInfo")}},watch:{getSelectedCard:{handler(t){t&&(this.freezeCard="inactive"===t.cardStatus)}}}},n=l,o=a(3736),h=(0,o.Z)(n,s,i,!1,null,null,null),u=h.exports},9651:function(t,e,a){a.d(e,{Iw:function(){return c},KZ:function(){return i},l3:function(){return r}});var s=a(3328);const i={daily:s.Z.t("limitPerDay"),weekly:s.Z.t("limitPerWeek"),monthly:s.Z.t("limitPerMonth"),yearly:s.Z.t("limitPerYear"),allTime:s.Z.t("allTime"),perTransaction:s.Z.t("limitPerTransaction"),cardBoxTitle:{daily:s.Z.t("limitDay"),weekly:s.Z.t("limitWeek"),monthly:s.Z.t("limitMonth"),yearly:s.Z.t("limitYear"),allTime:s.Z.t("limitAllTime"),perTransaction:s.Z.t("limitTransaction")}},r={active:"Active",inactive:"Frozen",pendingActivation:"Inactive"},c={physical:s.Z.t("cardType_physical"),virtual:s.Z.t("cardType_virtual")}},6270:function(t,e,a){t.exports=a.p+"img/visa-logo.e9d72761.svg"}}]);
//# sourceMappingURL=4642.1706699928369.js.map