{"version":3,"file":"5134.1706558449530.js","mappings":"uJAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,aAAa,CAACN,EAAIO,GAAG,iBAAiB,EACxJC,EAAkB,G,mBCQtB,GACAC,KAAAA,YACAC,WAAAA,CAAAA,EAGAC,OAAAA,CAAAA,EAAAA,GACAC,OACA,OACAC,WAAAA,EACAC,WAAAA,EACAC,WAAAA,EAEA,EACAC,UAEA,iBACA,EACAC,SAAAA,KACA,8BACA,sCAEAC,QAAAA,KACA,4GACA,2CACA,+CACAC,kBAAAA,GACA,0BACA,gCAAAC,WAAAA,KAAAA,oBAAAA,GAAAC,QAAAA,CACAC,SACAC,YAAAA,OAAAA,SAAAA,OAAAA,wBACAC,MAAAC,IACA,QACAC,OAAAA,eAAAA,QAAAA,UAAAA,KAAAA,cACAA,OAAAA,eAAAA,QAAAA,mBAAAA,KAAAA,UAAAA,KAAAA,mBACAA,OAAAA,eAAAA,QAAAA,cAAAA,KAAAA,oBAAAA,IACAA,OAAAA,eAAAA,QAAAA,YAAAA,KAAAA,MAAAA,SAAAA,QAAAA,OAAAA,iBACAA,OAAAA,SAAAA,KAAAA,EAAAA,IACA,IACAC,SAAA,KACAC,EAAAA,OAAAA,GAEA,EACAC,aACA,0BACA,yDACAL,MAAAC,IACAK,QAAAA,IAAAA,GACA,sBACAC,YAAAA,KACA,sCACA,EACA,IACAC,OAAAC,IACAH,QAAAA,IAAAA,IAAAA,GACA,4CACAC,YAAAA,KACA,sCACA,EACA,IACAJ,SAAA,KACAC,EAAAA,OAAAA,GAEA,ICvEqS,I,UCQjSM,GAAY,OACd,EACAnC,EACAS,GACA,EACA,KACA,KACA,MAIF,EAAe0B,EAAiB,O,oCClBhC,QACEjB,SAAU,KACLkB,EAAAA,EAAAA,IAAW,MAAO,CAAC,yBAExBjB,QAAS,KACJkB,EAAAA,EAAAA,IAAW,MAAO,CAAC,iBAAkB,kBAAmB,oBACxDC,EAAAA,EAAAA,IAAa,MAAO,CAAC,yBAE1BrB,UAEE,MAAMsB,EAAmBrC,KAAKsC,oBAC9B,GAAKD,EA0BCrC,KAAKuC,eAA+C,oBAAvBvC,KAAKuC,eACpCvC,KAAKuC,cAAcF,OA3BA,CACrB,MAAMV,EAAS3B,KAAKwC,aACpBxC,KAAKyC,kBACFlB,MAAMmB,IACL,GAAgB,IAAZA,EAAEC,MAAa,CAEjB,MAAMC,EAAeF,EAAE/B,KACvBX,KAAK6C,oBAAoBD,EAAa,IAEpC5C,KAAKuC,eACyB,oBAAvBvC,KAAKuC,eAEZT,YAAW,KACT9B,KAAKuC,cAAcK,EAAa,GAAhC,GACC,EAEN,KAEFb,OAAOC,IACNH,QAAQiB,IAAId,GACZhC,KAAK+C,gBAAgBf,EAArB,IAEDN,SAAQ,KACPC,EAAOqB,OAAP,GAEL,CAKF,E","sources":["webpack://Solid/./src/modules/kyb/views/Esign.vue?fe61","webpack://Solid/src/modules/kyb/views/Esign.vue","webpack://Solid/./src/modules/kyb/views/Esign.vue?6e0b","webpack://Solid/./src/modules/kyb/views/Esign.vue","webpack://Solid/./src/modules/kyb/mixins/business.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"kyb-eSign\"},[_vm._v(\" Loading... \")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"kyb-eSign\">\n    Loading...\n  </div>\n</template>\n<script>\nimport businessMixin from '../mixins/business';\nimport { mapActions, mapGetters, mapMutations } from 'vuex';\n  \nexport default {\n  name: 'ESignView',\n  components: {\n    \n  },\n  mixins: [businessMixin],\n  data() {\n    return {\n      retryCount: 0,\n      showESign: false,\n      isLoading: false\n    };\n  },\n  created() {\n    // this.$router.back();\n    this.startEsign();\n  },\n  computed: {\n    ...mapGetters(['getActiveEnv']),\n    ...mapGetters('user', ['getUserAuthToken'])\n  },\n  methods: {\n    ...mapActions('kyb', ['fetchBusiness', 'listAllBusiness', 'updateOwnershipDisclosure', 'getOwnershipDisclosure']),\n    ...mapMutations('kyb', ['setSelectedBusiness']),\n    ...mapMutations('account', ['updateCreateAccountData']),\n    performSignAction(action) {\n      const loader = this.showLoader();\n      this.updateOwnershipDisclosure({businessId: this.getSelectedBusiness.id, payload: {\n        action,\n        redirectUri: window.location.origin + '/kyb/eSignCallback'\n      }}).then((res) => {\n        if(res.url) {\n          window.sessionStorage.setItem('app_env', this.getActiveEnv)\n          window.sessionStorage.setItem('user_auth_tokens', JSON.stringify(this.getUserAuthToken));\n          window.sessionStorage.setItem('business_id', this.getSelectedBusiness.id);\n          window.sessionStorage.setItem('device_id', this.$http.defaults.headers.common['SD-Device-ID']);\n          window.location.href = res.url;\n        }\n      }).finally(() => {\n        loader.close();\n      });\n    },\n    startEsign() {\n      const loader = this.showLoader();\n      this.getOwnershipDisclosure(this.getSelectedBusiness.id)\n        .then((res) => {\n          console.log(res)\n          if(res.status === 'pending') {\n            setTimeout(() => {\n              this.performSignAction('regenrate')\n            }, 0)\n          }\n        }).catch((e) => {\n          console.log('e', e)\n          if(e.code === 'EC_BUSINESS_AGREEMENT_NOT_FOUND') {\n            setTimeout(() => {\n              this.performSignAction('regenrate')\n            }, 0)\n          }\n        }).finally(() => {\n          loader.close();\n        });\n    }\n  }\n};\n</script>\n  <style lang=\"scss\">\n    .kyb-eSign {\n      &__agreement {\n        .title {\n          padding-bottom: 100px;\n        }\n      }\n    }\n  </style>","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Esign.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Esign.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Esign.vue?vue&type=template&id=bb6c06b0&\"\nimport script from \"./Esign.vue?vue&type=script&lang=js&\"\nexport * from \"./Esign.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Esign.vue?vue&type=style&index=0&id=bb6c06b0&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { mapActions, mapGetters, mapMutations } from 'vuex';\nexport default {\n  computed: {\n    ...mapGetters('kyb', ['getSelectedBusiness'])\n  },\n  methods: {\n    ...mapActions('kyb', ['fetchAllOwners', 'listAllBusiness', 'updateOwner']),\n    ...mapMutations('kyb', ['setSelectedBusiness'])\n  },\n  created() {\n    /** @type {import('@m/kyb/store/state').kybState['selectedBusinessType]}*/\n    const selectedBusiness = this.getSelectedBusiness;\n    if (!selectedBusiness) {\n      const loader = this.showLoader();\n      this.listAllBusiness()\n        .then((r) => {\n          if (r.total !== 0) {\n            /** @type {import('@m/kyb/store/state').kybState['bussinessDetails']} */\n            const businessList = r.data;\n            this.setSelectedBusiness(businessList[0]);\n            if (\n              this.afterBusiness &&\n              typeof this.afterBusiness === 'function'\n            ) {\n              setTimeout(() => {\n                this.afterBusiness(businessList[0]);\n              }, 0);\n            }\n          }\n        })\n        .catch((e) => {\n          console.log(e);\n          this.apiErrorMessage(e);\n        })\n        .finally(() => {\n          loader.close();\n        });\n    } else {\n      if (this.afterBusiness && typeof this.afterBusiness === 'function') {\n        this.afterBusiness(selectedBusiness);\n      }\n    }\n  }\n};\n"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","staticRenderFns","name","components","mixins","data","retryCount","showESign","isLoading","created","computed","methods","performSignAction","businessId","payload","action","redirectUri","then","res","window","finally","loader","startEsign","console","setTimeout","catch","e","component","mapGetters","mapActions","mapMutations","selectedBusiness","getSelectedBusiness","afterBusiness","showLoader","listAllBusiness","r","total","businessList","setSelectedBusiness","log","apiErrorMessage","close"],"sourceRoot":""}