"use strict";(self["webpackChunkSolid"]=self["webpackChunkSolid"]||[]).push([[6170],{9243:function(t,e,a){a.d(e,{Z:function(){return l}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"skeleton-credit-card"},[t.title?a("p",{staticClass:"header-1"},[t._v(" "+t._s(t.title)+" ")]):t._e(),a("el-skeleton",{attrs:{animated:!0,count:t.count}},[a("template",{slot:"template"},[a("div",{staticClass:"skeleton-credit-card__wrapper"},[a("div",{staticClass:"skeleton-credit-card__wrapper__part-1"},[a("el-skeleton-item",{attrs:{variant:"p"}}),a("el-skeleton-item",{attrs:{variant:"h1"}})],1),a("div",{staticClass:"skeleton-credit-card__wrapper__part-2"},[a("el-skeleton-item",{attrs:{variant:"p"}}),a("el-skeleton-item",{attrs:{variant:"p"}}),a("el-skeleton-item",{attrs:{variant:"p"}})],1),a("div",{staticClass:"skeleton-credit-card__wrapper__part-3"},[a("el-skeleton-item",{attrs:{variant:"p"}}),a("el-skeleton-item",{attrs:{variant:"h1"}})],1)])])],2)],1)},s=[],r={props:{animated:{type:Boolean,required:!1,default:!0},title:{type:String,default:null,required:!1},count:{type:Number,default:3,required:!1}}},n=r,d=a(3736),c=(0,d.Z)(n,i,s,!1,null,null,null),l=c.exports},714:function(t,e,a){a.d(e,{Z:function(){return u}});var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.showMiniDetails?"include-mini-details":""},[i("div",{staticClass:"card",class:t.card.cardType,on:{click:t.viewCard}},[t.cardImg?i("img",{staticClass:"card-image",attrs:{src:t.cardImg,alt:"Card"}}):i("div",{staticClass:"card__default"}),i("div",{staticClass:"card__info"},[i("div",[i("p",{staticClass:"card-type"},[t._v(" "+t._s(t.$t("physical"===t.card.cardType?"cardType_physical":"cardType_virtual"))+" ")]),i("p",{staticClass:"card-limit-use"},[t._v(" "+t._s(t.spendingLimit)+" ")])]),i("div",[i("div",[t.showSecretData?i("p",{ref:"secret-data",staticClass:"card-number",attrs:{id:"secret-data"}}):i("p",{staticClass:"card-number"},[t._v(" **** **** **** "+t._s(t.card.last4)+" ")]),i("div",{staticClass:"exp-cvv"},[i("div",[i("p",[t._v("EXP")]),i("span",[t._v(t._s(t.card.expiryMonth)+" / "+t._s(t.card.expiryYear))])]),t.showSecretData?i("div",[i("p",[t._v(t._s(t.$t("cardInfo_detail_cvv")))]),i("span",{ref:"secret-data-cvv",attrs:{id:"secret-data-cvv"}})]):t._e()]),i("p",{staticClass:"card-holder"},[t._v(" "+t._s(t.card.cardholder.name)+" ")]),t.getSelectedBusiness&&t.isBusinessAccountType?i("p",{staticClass:"card-holder-company"},[t._v(" "+t._s(t.getSelectedBusiness.legalName)+" ")]):t._e(),t.showActivationSwitch?i("div",{staticClass:"active-wrapper"},[i("el-switch",{staticClass:"keep-default",attrs:{width:35},nativeOn:{click:function(e){return t.toggleFreeze(e)}},model:{value:t.isActive,callback:function(e){t.isActive=e},expression:"isActive"}}),i("span",[t._v(t._s(t.cardStatus[t.card.cardStatus]))])],1):t._e()]),t.showLogo?i("div",{staticClass:"card-logo"},[i("img",{attrs:{src:a(6270),alt:"Visa"}})]):t._e()])])]),t.showMiniDetails?i("div",{staticClass:"mini-details"},[i("div",{staticClass:"mini-details__row"},[i("div",{staticClass:"mini-details__inner"},[i("label",[t._v(t._s(t.$t("label")))]),i("div",{staticClass:"mini-details__data"},[t._v(" "+t._s(t.card.label)+" ")])]),i("div",{staticClass:"mini-details__inner"},[i("label",[t._v(" "+t._s(t.$t("card_spendLimit"))+" ")]),i("div",{staticClass:"mini-details__data"},[t._v(" $ "+t._s(t.card.limitAmount)+" ")])])])]):t._e()])},s=[],r=a(629),n=a(9651),d=a(9896),c=a(1712),l={name:"Card",props:{card:Object,showActivationSwitch:{type:Boolean,default:!1},showLogo:{type:Boolean,default:!0},showSecretData:{type:Boolean,default:!1},showMiniDetails:{type:Boolean,default:!1}},data(){return{isActive:"active"===this.card.cardStatus,cardStatus:n.l3,cardType:n.Iw}},computed:{...(0,r.Se)("user",["getPersonDetails","getProgramDetails","getUserAuthToken"]),...(0,r.Se)("kyb",["getSelectedBusiness"]),...(0,r.Se)("account",["isBusinessAccountType"]),spendingLimit(){return(0,c.oB)(this.card.limitAmount)+" "+(n.KZ.cardBoxTitle[this.card.limitInterval]||"")},cardImg(){const t=this.getProgramDetails;return"physical"==this.card.cardType?t&&t.brand&&t.brand.cardArtPhysical?t.brand.cardArtPhysical:null:t&&t.brand&&t.brand.cardArtVirtual?t.brand.cardArtVirtual:null}},mounted(){this.showSecretData&&window.addVgsScript((()=>{this.getCardSecret()}))},methods:{...(0,r.OI)("card",["updateSelectedCard"]),...(0,r.nv)("card",["updateCard","showToken"]),activate(t){t.stopPropagation(),this.updateSelectedCard(this.card),setTimeout((()=>{this.$emit("changeDrawer","activate")}),0)},viewCard(t){window.analytics&&window.analytics.track("homeCardDetails"),"pendingActivation"!==this.card.cardStatus?(this.updateSelectedCard(this.card),this.$emit("changeDrawer","manage")):this.activate(t)},toggleFreeze(t){if(t.stopPropagation(),"pendingActivation"===this.card.cardStatus)return this.isActive=!1,void this.activate(t);const e="active"===this.card.cardStatus;this.$confirm(this.$t(e?"cardInfo_freeze_alert_messsage":"cardInfo_unfreeze_alert_messsage"),this.$t(e?"cardInfo_freeze_alert_title":"cardInfo_unfreeze_alert_title"),{confirmButtonText:this.$t(e?"cardInfo_freeze_button":"cardInfo_unfreeze_button"),cancelButtonText:this.$t("cancel")}).then((()=>{this.freeze()})).catch((()=>{this.isActive=!this.isActive}))},freeze(){const t=this.showLoader();this.updateCard({cardId:this.card.id,payload:{cardStatus:this.isActive?"active":"inactive"}}).then((t=>{this.isActive="active"===t.cardStatus,this.card.cardStatus=t.cardStatus,this.$emit("update",this.card)})).catch((t=>{console.log(t),this.apiErrorMessage(t)})).finally((()=>{t.close()}))},getCardSecret(){let t=(0,d.dU)("VUE_APP_VGS_VALUTID");const e=this.showLoader();this.showToken(this.card.id).then((e=>{const a={"sd-show-token":e.showToken};let i=window.VGSShow.create(t);const s=i.request({name:"cardNoIframe",method:"GET",headers:a,path:`/v1/card/${this.card.id}/show`,jsonPathSelector:"cardNumber",serializers:[i.SERIALIZERS.replace("(\\d{4})(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3 $4")]});s.render(this.$refs["secret-data"],{color:"#fff",fontSize:"14px",display:"block",height:"16px",overflow:"hidden"});const r=i.request({name:"cvvIframe",method:"GET",headers:a,path:`/v1/card/${this.card.id}/show`,jsonPathSelector:"cvv"});r.render(this.$refs["secret-data-cvv"],{color:"#fff",fontSize:"16px",display:"block",height:"16px",overflow:"hidden"}),this.$emit("cardNumberDisplay",{show:i,headers:a})})).catch((()=>{})).finally((()=>{e.close()}))}},watch:{card:{handler(t){this.isActive="active"===t.cardStatus},deep:!0}}},o=l,h=a(3736),p=(0,h.Z)(o,i,s,!1,null,null,null),u=p.exports},6170:function(t,e,a){a.r(e),a.d(e,{default:function(){return v}});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"widgetContainer cardList full-width"},[a("div",{staticClass:"widgetContainer__header-fixed"},[a("div",{staticClass:"headerExport"},[a("p",{staticClass:"header-1"},[t._v(" "+t._s(t.$t("card_title"))+" ")]),t._e()]),a("div",{class:"cardList__search "+(0!==t.cards.length?"search-add":"")},[a("div",{staticClass:"searchInput"},[a("el-input",{attrs:{type:"text",placeholder:t.$t("card_search_placeholder"),clearable:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("span",{staticClass:"icon-icon-search"})],1),0!==t.cards.length?a("div",{staticClass:"add",on:{click:t.newCard}},[a("p",[a("span",{staticClass:"icon-plus"}),t._v(" "+t._s(t.$t("cotacts_list_addContact")))])]):t._e()])]),t.loading&&1===t.page?a("SkeletonCreditCard",{staticClass:"cardList__skeleton",attrs:{count:3}}):a("div",{staticClass:"widgetContainer__body widgetContainer--scrollable"},[a("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.load,expression:"load"}],staticClass:"cardList__list",attrs:{"infinite-scroll-disabled":t.disabledLoadMore,"infinite-scroll-immediate":!1}},[a("ul",{staticClass:"cardList__dashboard-list"},[0===t.cards.length?a("li",{staticClass:"new-card",on:{click:t.newCard}},[a("div",{staticClass:"new-card__inside"},[a("div",[a("i",{staticClass:"el-icon-circle-plus-outline"}),a("h5",[t._v(t._s(t.$t("card_add_label")))])])])]):t._e(),t._l(t.cards,(function(e){return a("li",{key:e.id},[a("Card",{staticClass:"card-detail",attrs:{"show-logo":!1,"show-activation-switch":!0,card:e,"show-mini-details":!0},on:{changeDrawer:function(e){return t.updateDrawer(e)}}})],1)}))],2)]),t.loading&&1!==t.page?a("p",[t._v(" Loading... ")]):t._e()]),a("Drawer",{staticClass:"default-drawer",attrs:{components:t.cardCreateRoutes,show:t.cardCreateDialog},on:{"update:show":function(e){t.cardCreateDialog=e}}}),a("Drawer",{staticClass:"default-drawer",attrs:{components:t.cardActivateRoutes,show:t.cardActviateDialog},on:{"update:show":function(e){t.cardActviateDialog=e}}}),a("Drawer",{staticClass:"default-drawer",attrs:{components:t.cardManageRoutes,show:t.cardMangeDialog},on:{"update:show":function(e){t.cardMangeDialog=e}}})],1)},s=[],r=a(629),n=a(8663),d=a(714),c=a(9651),l=a(1812),o=a(9243),h={name:"CardList",components:{Card:d.Z,Drawer:l.Z,SkeletonCreditCard:o.Z},mixins:[n.Z],data(){return{search:"",cardActviateDialog:!1,cardCreateDialog:!1,cardMangeDialog:!1,loading:!0,page:1,limit:25,cardActivateRoutes:[{default:!0,name:"ActivateCardForm",component:()=>a.e(8359).then(a.bind(a,8359))},{name:"CardActivated",component:()=>Promise.all([a.e(6537),a.e(2574)]).then(a.bind(a,2574)),methods:{refresh:()=>{this.page=1,this.getData()}}},{name:"CardSpendingForm",component:()=>a.e(3462).then(a.bind(a,4130))},{name:"ReplaceCardReason",component:()=>a.e(7278).then(a.bind(a,7278))},{name:"ReplaceCardDetails",component:()=>a.e(9458).then(a.bind(a,5942))},{name:"ReplaceCardAddress",component:()=>a.e(5895).then(a.bind(a,5895))}],cardCreateRoutes:[{default:!0,name:"CardTypeForm",component:()=>a.e(7363).then(a.bind(a,813))},{name:"CardSpendingForm",component:()=>a.e(3462).then(a.bind(a,4130))},{name:"CardBillingAddressForm",component:()=>a.e(5749).then(a.bind(a,7522))},{name:"CardShippingAddressForm",component:()=>a.e(7324).then(a.bind(a,7564))},{name:"CreatedSuccess",methods:{afterCreated:()=>{this.page=1,this.getData()},goToDetailsScreen:t=>{this.cardCreateDialog=!1,this.updateDrawer(t)}},component:()=>Promise.all([a.e(6537),a.e(8243)]).then(a.bind(a,4207))}],cardManageRoutes:[{default:!0,name:"CardManagement",component:()=>a.e(4657).then(a.bind(a,4642)),methods:{refresh:()=>{this.page=1,this.getData()}}},{name:"CardDetails",component:()=>a.e(4933).then(a.bind(a,4933))},{name:"CardSpendingForm",component:()=>a.e(3462).then(a.bind(a,4130)),methods:{refresh:()=>{this.page=1,this.getData()}}},{name:"AtmInfo",component:()=>a.e(3668).then(a.bind(a,3668))},{name:"SetATMPin",component:()=>a.e(9885).then(a.bind(a,9885))},{name:"findATM",component:()=>a.e(9244).then(a.bind(a,9244))},{name:"ReplaceCardReason",component:()=>a.e(7278).then(a.bind(a,7278))},{name:"ReplaceCardDetails",component:()=>a.e(9458).then(a.bind(a,5942))},{name:"ReplaceCardAddress",component:()=>a.e(5895).then(a.bind(a,5895))}]}},computed:{...(0,r.Se)("card",["getCards"]),cards(){const t=this.getCards.data;return""===this.search?this.getCards.data:t.filter((t=>t.label.toLowerCase().includes(this.search.toLowerCase())))},disabledLoadMore(){return!0===this.loading||this.getCards.total<=this.page*this.limit}},created(){this.getData()},methods:{...(0,r.nv)("card",["listAllCardByAccount"]),...(0,r.OI)("card",["updateSelectedCard","updateReplaceCardDate","updateCreateCardData"]),updateDrawer(t){"activate"==t?this.cardActviateDialog=!0:"manage"==t&&(this.cardMangeDialog=!0)},goToHome(){this.$router.push("/dashboard/home")},newCard(){this.updateCreateCardData(null),this.updateReplaceCardDate(null),this.updateSelectedCard(null),this.cardCreateDialog=!0},status(t){return c.l3[t.cardStatus]},getData(){this.loading=!0,this.listAllCardByAccount({accountId:this.getSelectedAccount.id,limit:this.limit,offset:(this.page-1)*this.limit}).catch((t=>{console.log(t),this.apiErrorMessage(t)})).finally((()=>{this.loading=!1}))},load(){!1===this.loading&&this.getCards.total>this.page*this.limit&&(this.page++,this.getData())}},watch:{getSelectedAccount(t,e){t&&e&&t.id!==e.id&&(this.page=1,this.getData())}}},p=h,u=a(3736),m=(0,u.Z)(p,i,s,!1,null,null,null),v=m.exports},9651:function(t,e,a){a.d(e,{Iw:function(){return n},KZ:function(){return s},l3:function(){return r}});var i=a(3328);const s={daily:i.Z.t("limitPerDay"),weekly:i.Z.t("limitPerWeek"),monthly:i.Z.t("limitPerMonth"),yearly:i.Z.t("limitPerYear"),allTime:i.Z.t("allTime"),perTransaction:i.Z.t("limitPerTransaction"),cardBoxTitle:{daily:i.Z.t("limitDay"),weekly:i.Z.t("limitWeek"),monthly:i.Z.t("limitMonth"),yearly:i.Z.t("limitYear"),allTime:i.Z.t("limitAllTime"),perTransaction:i.Z.t("limitTransaction")}},r={active:"Active",inactive:"Frozen",pendingActivation:"Inactive"},n={physical:i.Z.t("cardType_physical"),virtual:i.Z.t("cardType_virtual")}},8663:function(t,e,a){var i=a(629);e["Z"]={computed:{...(0,i.Se)("kyb",["getSelectedBusiness"]),...(0,i.Se)("account",["getSelectedAccount"])},created(){this.getSelectedAccount||this.goToWelcomeScreen()}}},6270:function(t,e,a){t.exports=a.p+"img/visa-logo.e9d72761.svg"}}]);
//# sourceMappingURL=6170.1705902390399.js.map